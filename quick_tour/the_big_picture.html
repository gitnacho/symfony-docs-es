
<!DOCTYPE html> 
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Un primer vistazo &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../_static/tnp.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.15',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/icotnp.ico"/>
    <link rel="top" title="Manual de Symfony2 en Español" href="../index.html" />
    <link rel="up" title="Inicio rápido" href="index.html" />
    <link rel="next" title="La vista" href="the_view.html" />
    <link rel="prev" title="Inicio rápido" href="index.html" /> 
  </head>
  <body>
  <div class="imalogo">
    
  <a href="../index.html"><img src="http://gitnacho.github.com/tnp/img/sf/logo-big.gif" alt="Edición estándar de Symfony2" />
  
    <a href="../index.html"><img src="http://gitnacho.github.com/tnp/_static/normaltnp.png" alt="Traducciones de Nacho Pacheco" /></a>
    <div class="social">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="esymfony" data-lang="es">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
    <div id="searchbox">
      <form class="searc " action="../search.html" method="get">
      <input type="search" name="q" placeholder="Término a buscar" />
      <input type="submit" value="Ir" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
    

    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="the_view.html" title="La vista"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="Inicio rápido"
             accesskey="P">anterior</a> |</li>
        <li><a href="../index.html">en Español</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Inicio rápido</a> &raquo;</li> 
      </ul>
    </div>
  </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="un-primer-vistazo">
<h1>Un primer vistazo<a class="headerlink" href="#un-primer-vistazo" title="Enlazar permanentemente con este título">¶</a></h1>
<p>¡Empieza a usar <em>Symfony2</em> en 10 minutos! Este capítulo te guiará a través de algunos de los conceptos más importantes detrás de <em>Symfony2</em> y explica cómo puedes empezar a trabajar rápidamente, mostrándote un sencillo proyecto en acción.</p>
<p>Si ya has usado una plataforma para desarrollo web, seguramente te sentirás a gusto con <em>Symfony2</em>. Si no es tu caso, ¡bienvenido a una nueva forma de desarrollar aplicaciones web!</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">¿Quieres saber por qué y cuándo es necesario utilizar una plataforma? Lee el documento «<a class="reference external" href="http://symfony.com/symfony-in-five-minutes">Symfony en 5 minutos</a>».</p>
</div>
<div class="section" id="descargando-symfony2">
<h2>Descargando <em>Symfony2</em><a class="headerlink" href="#descargando-symfony2" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En primer lugar, comprueba que tienes instalado y configurado un servidor web (como <em>Apache</em>) con <em>PHP 5.3.3</em> o superior.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Si tienes <em>PHP 5.4</em>, puedes usar el servidor web incorporado. El servidor incorporado se debe utilizar sólo para fines de desarrollo, pero te puede ayudar para iniciar tu proyecto sencilla y rápidamente.</p>
<p>Sólo tienes que usar esta orden para iniciar el servidor:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php -S localhost:80 -t /ruta/a/www
</pre></div>
</div>
<p class="last">donde «<tt class="docutils literal"><span class="pre">/ruta/a/www</span></tt>» es la ruta a algún directorio de tu máquina en la que extrajiste <em>Symfony</em> por lo tanto la dirección final a tu aplicación es «<a class="reference external" href="http://localhost/Symfony/app_dev.php">http://localhost/Symfony/app_dev.php</a>». También puedes extraer primero <em>Symfony</em> y luego iniciar el servidor web en el directorio «web» de <em>Symfony</em>. Si haces esto, la dirección <em>URL</em> de tu aplicación será «<a class="reference external" href="http://localhost/app_dev.php">http://localhost/app_dev.php</a>».</p>
</div>
<p>¿Listo? Empecemos descargando la «<a class="reference external" href="http://symfony.com/download">edición estándar de Symfony2</a>», una <a class="reference internal" href="../glossary.html#term-distribucion"><em class="xref std std-term">distribución</em></a> de <em>Symfony</em> preconfigurada para la mayoría de los casos y que también contiene algún código de ejemplo que demuestra cómo utilizar <em>Symfony2</em> (consigue el paquete que incluye <em>proveedores</em> para empezar aún más rápido).</p>
<p>Después de extraer el paquete bajo el directorio raíz del servidor web, deberías tener un directorio <tt class="docutils literal"><span class="pre">Symfony/</span></tt> con una estructura como esta:</p>
<div class="highlight-text"><div class="highlight"><pre>www/ &lt;- el directorio raíz de tu servidor web
    Symfony/ &lt;- el archivo desempacado
        app/
            cache/
            config/
            logs/
            Resources/
        bin/
        src/
            Acme/
                DemoBundle/
                    Controller/
                    Resources/
                    ...
        vendor/
            symfony/
            doctrine/
            ...
        web/
            app.php
            ...
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Si estás familiarizado con <tt class="docutils literal"><span class="pre">Composer</span></tt>, puedes ejecutar la siguiente orden en lugar de descargar el archivo:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>composer.phar create-project symfony/framework-standard-edition ↓
                               ruta/donde/instalar dev-master

<span class="c"># elimina el historial de Git</span>
<span class="nv">$ </span>rm -rf .git
</pre></div>
</div>
</div>
<p>Para una versión exacta, reemplaza <cite>dev-master</cite> con la versión más reciente de <em>Symfony</em> (por ejemplo, 2.1.1). Para detalles, ve la <a class="reference external" href="http://symfony.com/download">Página de instalación de Symfony</a></p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Si tienes <em>PHP 5.4</em>, puedes usar el servidor <em>web</em> integrado.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># comprueba la configuración de tu CLI PHP</span>
<span class="nv">$ </span>php ./app/check.php

<span class="c"># ejecuta el servidor web integrado</span>
<span class="nv">$ </span>php ./app/console server:run
</pre></div>
</div>
<p>Entonces la <em>URL</em> de tu aplicación será «<a class="reference external" href="http://localhost:8000/app_dev.php">http://localhost:8000/app_dev.php</a>».</p>
<p class="last">El servidor integrado sólo se debe usar para fines de desarrollo, pero te puede ayudar para iniciar tu proyecto fácil y rápidamente.</p>
</div>
</div>
<div class="section" id="verificando-tu-configuracion">
<h2>Verificando tu configuración<a class="headerlink" href="#verificando-tu-configuracion" title="Enlazar permanentemente con este título">¶</a></h2>
<p><em>Symfony2</em> integra una interfaz visual para probar la configuración del servidor, muy útil para solucionar problemas relacionados con el servidor <em>Web</em> o una incorrecta configuración de <em>PHP</em>. Usa la siguiente <em>URL</em> para examinar el diagnóstico:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/config.php
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Todas las <em>URL</em> del ejemplo asumen que has descargado y descomprimido <em>Symfony</em> directamente al directorio raíz de tu servidor <em>web</em>. Si seguiste las instrucciones anteriores y descomprimiste <em>Symfony</em> en el directorio raíz de tu servidor <em>web</em>, entonces añade <tt class="docutils literal"><span class="pre">/Symfony/web</span></tt> después de <tt class="docutils literal"><span class="pre">localhost</span></tt> a todas las <em>URL</em> que veas:</p>
<div class="last highlight-text"><div class="highlight"><pre>http://localhost/Symfony/web/config.php
</pre></div>
</div>
</div>
<p>Si se listan errores o aspectos de configuración pendientes, corrígelos; Puedes realizar los ajustes siguiendo las recomendaciones. Cuando todo esté bien, haz clic en «<em>Pospón la configuración y llévame a la página de bienvenida</em>» para solicitar tu primera página <em>web</em> «real» en <em>Symfony2</em>:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/
</pre></div>
</div>
<p>¡<em>Symfony2</em> debería darte la bienvenida y felicitarte por tu arduo trabajo hasta el momento!</p>
<img alt="../_images/welcome.png" class="align-center" src="../_images/welcome.png" />
</div>
<div class="section" id="comprendiendo-los-fundamentos">
<h2>Comprendiendo los fundamentos<a class="headerlink" href="#comprendiendo-los-fundamentos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Uno de los principales objetivos de una plataforma es garantizar la <a class="reference external" href="http://es.wikipedia.org/wiki/Separation_of_concerns">separación de responsabilidades</a>.
Esto mantiene tu código organizado y permite a tu aplicación evolucionar fácilmente en el tiempo, evitando mezclar llamadas a la base de datos, etiquetas <em>HTML</em> y código de la lógica del negocio en un mismo archivo. Para alcanzar este objetivo, debes aprender algunos conceptos y términos fundamentales.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">¿Quieres más pruebas de que usar una plataforma es mucho mejor que mezclar todo en un mismo archivo? Lee el capítulo del libro «<a class="reference internal" href="../book/from_flat_php_to_symfony2.html"><em>Symfony2 frente a PHP simple</em></a>».</p>
</div>
<p>La distribución viene con algún código de ejemplo que puedes utilizar para aprender más sobre los principales conceptos de <em>Symfony2</em>. Ingresa a la siguiente <em>URL</em> para recibir un saludo de <em>Symfony2</em> (reemplaza <em>Nacho</em> con tu nombre):</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/demo/hello/Nacho
</pre></div>
</div>
<img alt="../_images/hola_nacho.png" class="align-center" src="../_images/hola_nacho.png" />
<p>¿Qué sucedió? Bien, diseccionemos la <em>URL</em>:</p>
<ul class="simple">
<li><tt class="file docutils literal"><span class="pre">app_dev.php</span></tt>: Es un <a class="reference internal" href="../glossary.html#term-controlador-frontal"><em class="xref std std-term">controlador frontal</em></a>. Es el único punto de entrada de la aplicación, mismo que responde a todas las peticiones del usuario;</li>
<li><tt class="docutils literal"><span class="pre">/demo/hello/Nacho</span></tt>: Esta es la <em>ruta virtual</em> a los recursos que el usuario quiere acceder.</li>
</ul>
<p>Tu responsabilidad como desarrollador es escribir el código que asigna la <em>petición</em> del usuario (<tt class="docutils literal"><span class="pre">/demo/hello/Nacho</span></tt>) al <em>recurso</em> asociado con ella (la página <em>HTML</em> <tt class="docutils literal"><span class="pre">¡Hola</span> <span class="pre">Nacho!</span></tt>).</p>
<div class="section" id="enrutando">
<h3>Enrutando<a class="headerlink" href="#enrutando" title="Enlazar permanentemente con este título">¶</a></h3>
<p><em>Symfony2</em> encamina la petición al código que la maneja tratando de hacer coincidir la <em>URL</em> solicitada contra algunos patrones configurados. De forma predeterminada, estos patrones (llamados rutas) se definen en el archivo de configuración <tt class="file docutils literal"><span class="pre">app/config/routing.yml</span></tt>: Cuando estás en el <a class="reference internal" href="#quick-tour-big-picture-environments"><em>entorno</em></a> <tt class="docutils literal"><span class="pre">dev</span></tt> &#8212;indicado por el controlador frontal <tt class="docutils literal"><span class="pre">app_</span></tt><strong>dev</strong><tt class="docutils literal"><span class="pre">.php</span></tt>&#8212; también se carga el archivo de configuración <tt class="file docutils literal"><span class="pre">app/config/routing_dev.yml</span></tt>. En la edición estándar, las rutas a estas páginas de «demostración» se encuentran en ese archivo:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing_dev.yml</span>
<span class="l-Scalar-Plain">_welcome</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Welcome</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>

<span class="l-Scalar-Plain">_demo</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;@AcmeDemoBundle/Controller/DemoController.php&quot;</span>
    <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">annotation</span>
    <span class="l-Scalar-Plain">prefix</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/demo</span>

<span class="c1"># ...</span>
</pre></div>
</div>
<p>Las primeras tres líneas (después del comentario) definen el código que se ejecuta cuando el usuario solicita el recurso «<tt class="docutils literal"><span class="pre">/</span></tt>» (es decir, la página de bienvenida que viste anteriormente). Cuando así lo solicites, el controlador <tt class="docutils literal"><span class="pre">AcmeDemoBundle:Welcome:index</span></tt> será ejecutado. En la siguiente sección, aprenderás exactamente lo que eso significa.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La <em>edición estándar de Symfony2</em> utiliza <a class="reference external" href="http://www.yaml.org/">YAML</a> para sus archivos de configuración, pero <em>Symfony2</em> también es compatible con <em>XML</em>, <em>PHP</em> y anotaciones nativas. Los diferentes formatos son compatibles y se pueden utilizar indistintamente en una aplicación. Además, el rendimiento de tu aplicación no depende del formato de configuración que elijas, ya que todo se memoriza en caché en la primer petición.</p>
</div>
</div>
<div class="section" id="controladores">
<h3>Controladores<a class="headerlink" href="#controladores" title="Enlazar permanentemente con este título">¶</a></h3>
<p>«Controlador» es un nombre elegante para una función o método <em>PHP</em> que se encarga de las <em>peticiones</em> entrantes y devuelve las <em>respuestas</em> (a menudo código <em>HTML</em>). En lugar de utilizar variables globales y funciones <em>PHP</em> (como <tt class="docutils literal"><span class="pre">$_GET</span></tt> o <tt class="docutils literal"><span class="pre">header()</span></tt>) para manejar estos mensajes <em>HTTP</em>, <em>Symfony</em> utiliza objetos: <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Request</span></tt> y <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Response</span></tt>. El controlador más simple posible crea la respuesta a mano, basándose en la petición:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="nv">$name</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>

<span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="p">,</span>
                    <span class="mi">200</span><span class="p">,</span>
                    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
           <span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last"><em>Symfony2</em> abarca la especificación <em>HTTP</em>, esta contiene las reglas que gobiernan todas las comunicaciones en la web. Lee el capítulo «<a class="reference internal" href="../book/http_fundamentals.html"><em>Symfony2 y fundamentos HTTP</em></a>» del libro para aprender más acerca de esto y la potencia que ello conlleva.</p>
</div>
<p><em>Symfony2</em> elige el controlador basándose en el valor del <tt class="docutils literal"><span class="pre">_controller</span></tt> de la configuración de enrutado: <tt class="docutils literal"><span class="pre">AcmeDemoBundle:Welcome:index</span></tt>. Esta cadena es el nombre lógico del <em>controlador</em>, y hace referencia al método <tt class="docutils literal"><span class="pre">indexAction</span></tt> de la clase <tt class="docutils literal"><span class="pre">Acme\DemoBundle\Controller\WelcomeController</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/DemoBundle/Controller/WelcomeController.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">WelcomeController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeDemoBundle:Welcome:index.html.twig&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Podrías haber usado el nombre completo de la clase y método &#8212;<tt class="docutils literal"><span class="pre">Acme\DemoBundle\Controller\WelcomeController::indexAction</span></tt>&#8212; para el valor de <tt class="docutils literal"><span class="pre">_controller</span></tt>. Pero si sigues algunas simples convenciones, el nombre lógico es más conciso y te permite mayor flexibilidad.</p>
</div>
<p>La clase <tt class="docutils literal"><span class="pre">WelcomeController</span></tt> extiende la clase integrada <tt class="docutils literal"><span class="pre">Controller</span></tt>, la cual proporciona útiles atajos a métodos, como el <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Bundle/FrameworkBundle/Controller/Controller.html#method_render" title="Symfony\Bundle\FrameworkBundle\Controller\Controller::render()"><span class="pre">render()</span></a></tt> que carga y reproduce una plantilla (<tt class="docutils literal"><span class="pre">AcmeDemoBundle:Welcome:index.html.twig</span></tt>). El valor devuelto es un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> poblado con el contenido reproducido. Por lo tanto, si surge la necesidad, la <tt class="docutils literal"><span class="pre">Respuesta</span></tt> se puede ajustar antes de enviarla al navegador:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeDemoBundle:Welcome:index.txt.twig&#39;</span><span class="p">);</span>
    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">);</span>

    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pero en todos los casos, el trabajo final del controlador es devolver siempre el objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> que será entregado al usuario. Este objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> se puede poblar con código <em>HTML</em>, representar una redirección al cliente, e incluso devolver el contenido de una imagen <em>JPG</em> con una cabecera <tt class="docutils literal"><span class="pre">Content-Type</span></tt> de <tt class="docutils literal"><span class="pre">image/jpg</span></tt>.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Derivar de la clase base <tt class="docutils literal"><span class="pre">Controller</span></tt> es opcional. De hecho, un controlador puede ser una simple función <em>PHP</em> e incluso un cierre <em>PHP</em>.
El capítulo «<a class="reference internal" href="../book/controller.html"><em>Controlador</em></a>» del libro abarca todo sobre los controladores de <em>Symfony2</em>.</p>
</div>
<p>El nombre de la plantilla, <tt class="docutils literal"><span class="pre">AcmeDemoBundle:Welcome:index.html.twig</span></tt>, es el <em>nombre lógico</em> de la plantilla y hace referencia al archivo <tt class="file docutils literal"><span class="pre">Resources/views/Welcome/index.html.twig</span></tt> dentro del <em class="dfn">AcmeDemoBundle</em> (ubicado en <tt class="file docutils literal"><span class="pre">src/Acme/DemoBundle</span></tt>). En la sección paquetes, a continuación, explicaré por qué esto es útil.</p>
<p>Ahora, de nuevo echa un vistazo a la configuración de enrutado y encuentra la clave <tt class="docutils literal"><span class="pre">_demo</span></tt>:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing_dev.yml</span>
<span class="l-Scalar-Plain">_demo</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;@AcmeDemoBundle/Controller/DemoController.php&quot;</span>
    <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">annotation</span>
    <span class="l-Scalar-Plain">prefix</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/demo</span>
</pre></div>
</div>
<p><em>Symfony2</em> puede leer/importar la información de enrutado desde diferentes archivos escritos en <em>YAML</em>, <em>XML</em>, <em>PHP</em> o, incluso, incorporada en anotaciones <em>PHP</em>. En este caso, el <em>nombre lógico</em> del recurso es <tt class="docutils literal"><span class="pre">&#64;AcmeDemoBundle/Controller/DemoController.php</span></tt> y se refiere al archivo <tt class="file docutils literal"><span class="pre">src/Acme/DemoBundle/Controller/DemoController.php</span></tt>. En este archivo, las rutas se definen como anotaciones sobre los métodos de acción:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/DemoBundle/Controller/DemoController.php</span>
<span class="k">use</span> <span class="nx">Sensio\Bundle\FrameworkExtraBundle\Configuration\Route</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Sensio\Bundle\FrameworkExtraBundle\Configuration\Template</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DemoController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/hello/{name}&quot;, name=&quot;_demo_hello&quot;)</span>
<span class="sd">     * @Template()</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">helloAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La anotación <tt class="docutils literal"><span class="pre">&#64;Route()</span></tt> define una nueva ruta con un patrón de <tt class="docutils literal"><span class="pre">/hello/{name}</span></tt> que ejecuta el método <tt class="docutils literal"><span class="pre">helloAction</span></tt> cuando concuerda. Una cadena encerrada entre llaves como <tt class="docutils literal"><span class="pre">{name}</span></tt> se conoce como marcador de posición. Como puedes ver, su valor se puede recuperar a través del argumento <tt class="docutils literal"><span class="pre">$name</span></tt> del método.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Incluso si las anotaciones no son compatibles nativamente en <em>PHP</em>, las utilizamos profusamente en <em>Symfony2</em> como una conveniente manera de configurar el comportamiento de la plataforma y mantener la configuración del lado del código.</p>
</div>
<p>Si echas un vistazo más de cerca al código de la acción del controlador, puedes ver que en lugar de reproducir una plantilla y devolver un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> como antes, sólo devuelve un arreglo de parámetros. La anotación <tt class="docutils literal"><span class="pre">&#64;Template()</span></tt> le dice a <em>Symfony</em> que reproduzca la plantilla por ti, pasando cada  variable del arreglo a la plantilla. El nombre de la plantilla reproducida sigue al nombre del controlador. Por lo tanto, en este ejemplo, se reproduce la plantilla <tt class="docutils literal"><span class="pre">AcmeDemoBundle:Demo:hello.html.twig</span></tt> (ubicada en <tt class="file docutils literal"><span class="pre">src/Acme/DemoBundle/Resources/views/Demo/hello.html.twig</span></tt>).</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Las anotaciones <tt class="docutils literal"><span class="pre">&#64;Route()</span></tt> y <tt class="docutils literal"><span class="pre">&#64;Template()</span></tt> son más poderosas que lo mostrado en el ejemplo simple de esta guía. Aprende más sobre las «<a class="reference external" href="http://gitnacho.github.com/symfony-docs-es/bundles/SensioFrameworkExtraBundle/index.html#annotations-for-controllers">anotaciones en controladores</a>» en la documentación oficial.</p>
</div>
</div>
<div class="section" id="plantillas">
<h3>Plantillas<a class="headerlink" href="#plantillas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El controlador procesa la plantilla <tt class="file docutils literal"><span class="pre">src/Acme/DemoBundle/Resources/views/Demo/hello.html.twig</span></tt> (o <tt class="docutils literal"><span class="pre">AcmeDemoBundle:Demo:hello.html.twig</span></tt> si utilizas el nombre lógico):</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="c">{# src/Acme/DemoBundle/Resources/views/Demo/hello.html.twig #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;AcmeDemoBundle::layout.html.twig&quot;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="s2">&quot;Hello &quot;</span> <span class="o">~</span> <span class="nv">name</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Hello </span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x">!&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Por omisión, <em>Symfony2</em> utiliza <a class="reference external" href="http://gitnacho.github.com/Twig/">Twig</a> como motor de plantillas, pero también puede utilizar plantillas <em>PHP</em> tradicionales si lo deseas. El siguiente capítulo es una introducción a cómo trabajan las plantillas en <em>Symfony2</em>.</p>
</div>
<div class="section" id="paquetes">
<h3>Paquetes<a class="headerlink" href="#paquetes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Posiblemente te hayas preguntado por qué la palabra <tt class="docutils literal"><span class="pre">bundle</span></tt> (<a class="reference internal" href="../glossary.html#term-paquete"><em class="xref std std-term">paquete</em></a> en adelante), se utiliza en muchos de los nombres que hemos visto hasta ahora. Todo el código que escribas para tu aplicación está organizado en paquetes. Hablando en <em>Symfony2</em>, un paquete es un conjunto estructurado de archivos (archivos <em>PHP</em>, hojas de estilo, <em>JavaScript</em>, imágenes, ...) que implementa una sola característica (un <em>blog</em>, un foro, ...) y que fácilmente se puede compartir con otros desarrolladores. Hasta ahora, solo has manipulado un paquete, <tt class="docutils literal"><span class="pre">AcmeDemoBundle</span></tt>. Aprenderás más acerca de los paquetes en el último capítulo de esta guía.</p>
</div>
</div>
<div class="section" id="trabajando-con-entornos">
<span id="quick-tour-big-picture-environments"></span><h2>Trabajando con entornos<a class="headerlink" href="#trabajando-con-entornos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ahora que tienes una mejor comprensión de cómo funciona <em>Symfony2</em>, dale una mirada más atenta a la parte inferior de cualquier página reproducida por <em>Symfony2</em>. Deberás notar una pequeña barra con el logotipo de <em>Symfony2</em>. Esta se conoce como la «barra de depuración web» y es la mejor amiga del desarrollador.</p>
<img alt="../_images/web_debug_toolbar_es.png" class="align-center" src="../_images/web_debug_toolbar_es.png" />
<p>Pero lo que ves al principio es sólo la punta del iceberg; haz clic en el extraño número hexadecimal para revelar otra muy útil herramienta de depuración de <em>Symfony2</em>:
el generador de perfiles.</p>
<img alt="../_images/profiler_es.png" class="align-center" src="../_images/profiler_es.png" />
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Puedes conseguir más información rápidamente manteniendo el puntero del ratón sobre los elementos en la barra de depuración <em>Web</em>.</p>
</div>
<p>Por supuesto, no querrás mostrar estas herramientas al desplegar tu aplicación en producción. Es por eso que encontrarás otro controlador frontal en el directorio <tt class="docutils literal"><span class="pre">web/</span></tt> (<tt class="file docutils literal"><span class="pre">app.php</span></tt>), el cual está optimizado para el entorno de producción:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app.php/demo/hello/Fabien
</pre></div>
</div>
<p>Y si utilizas <em>Apache</em> con <tt class="docutils literal"><span class="pre">mod_rewrite</span></tt> habilitado, incluso puedes omitir la parte <tt class="file docutils literal"><span class="pre">app.php</span></tt> de la <em>URL</em>:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/demo/hello/Nacho
</pre></div>
</div>
<p>Por último pero no menos importante, en los servidores en producción, debes apuntar tu directorio web raíz al directorio <tt class="docutils literal"><span class="pre">web/</span></tt> para proteger tu instalación e incluso, para que tus <em>URL</em> tengan un mejor aspecto:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/demo/hello/Nacho
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Ten en cuenta que las tres direcciones <em>URL</em> anteriores sólo se proporcionan aquí como <strong>ejemplos</strong> de cómo se ve una <em>URL</em> al utilizar el controlador frontal de producción (con o sin <tt class="docutils literal"><span class="pre">mod_rewrite</span></tt>). Si realmente lo intentas en una instalación de la <em>edición estándar de Symfony</em>, fuera de la caja obtendrás un error 404 puesto que <tt class="docutils literal"><span class="pre">AcmeDemoBundle</span></tt> sólo se activa en el entorno de desarrollo e importa sus rutas en <tt class="file docutils literal"><span class="pre">app/config/routing_dev.yml</span></tt>.</p>
</div>
<p>Para hacer que tu aplicación responda más rápido, <em>Symfony2</em> mantiene una caché en el directorio <tt class="docutils literal"><span class="pre">app/cache/</span></tt>. En el entorno de desarrollo (<tt class="file docutils literal"><span class="pre">app_dev.php</span></tt>), esta caché se vacía automáticamente cada vez que realizas cambios en cualquier código o configuración. Pero ese no es el caso en el entorno de producción (<tt class="file docutils literal"><span class="pre">app.php</span></tt>) donde el rendimiento es clave. Es por eso que siempre debes utilizar el entorno de desarrollo al estar desarrollando tu aplicación.</p>
<p>Diferentes <a class="reference internal" href="../glossary.html#term-entorno"><em class="xref std std-term">entornos</em></a> de una determinada aplicación sólo se diferencian en su configuración. De hecho, una configuración puede heredar de otra:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config_dev.yml</span>
<span class="l-Scalar-Plain">imports</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">resource</span><span class="p-Indicator">:</span> <span class="nv">config.yml</span> <span class="p-Indicator">}</span>

<span class="l-Scalar-Plain">web_profiler</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">toolbar</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">intercept_redirects</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>El entorno <tt class="docutils literal"><span class="pre">dev</span></tt> (el cual carga el archivo de configuración <tt class="file docutils literal"><span class="pre">config_dev.yml</span></tt>) importa el archivo global <tt class="file docutils literal"><span class="pre">config.yml</span></tt> y luego lo modifica, en este ejemplo, activando la barra de herramientas para depuración web.</p>
</div>
<div class="section" id="consideraciones-finales">
<h2>Consideraciones finales<a class="headerlink" href="#consideraciones-finales" title="Enlazar permanentemente con este título">¶</a></h2>
<p>¡Enhorabuena! Has tenido tu primera experiencia codificando en <em>Symfony2</em>. No fue tan difícil, ¿cierto? Hay mucho más por explorar, pero ya debes tener una idea de cómo <em>Symfony2</em> facilita la implementación de mejores y más rápidos sitios web. Si estás interesado en aprender más acerca de <em>Symfony2</em>, sumérgete en la siguiente sección:
«<a class="reference internal" href="the_view.html"><em>La vista</em></a>».</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <a href="https://github.com/symfony/symfony-standard"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://gitnacho.github.com/tnp/img/comun/bifurcame.png" alt="Bifúrcame en GitHub" /></a>
  
  <div style="width:740px;margin:10px auto;">
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="the_view.html" title="La vista"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="Inicio rápido"
             >anterior</a> |</li>
        <li><a href="../index.html">en Español</a> &raquo;</li>
          <li><a href="index.html" >Inicio rápido</a> &raquo;</li> 
      </ul>
    </div>
  </div>


   <div style="width: 740px; margin: 0 auto;">
     <div id="disqus_thread"></div>
     
    <div class="footer">
        &copy; Copyright 2011-2013, Traducido por Nacho Pacheco.
      Actualizado por última vez en Jan 18, 2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
   </div>
   <script type="text/javascript">
    var disqus_shortname = 'documentos-mx';
    var disqus_developer = 1;
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script>
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>