
<!DOCTYPE html> 
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Gestión de la sesión &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../../_static/tnp.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.15',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/icotnp.ico"/>
    <link rel="top" title="Manual de Symfony2 en Español" href="../../index.html" />
    <link rel="up" title="Fundamento HTTP" href="index.html" />
    <link rel="next" title="Configurando sesiones y controladores de guardado" href="session_configuration.html" />
    <link rel="prev" title="El componente HttpFoundation" href="introduction.html" /> 
  </head>
  <body>
  <div class="imalogo">
    
  <a href="../../index.html"><img src="http://gitnacho.github.com/tnp/img/sf/logo-big.gif" alt="Edición estándar de Symfony2" />
  
    <a href="../../index.html"><img src="http://gitnacho.github.com/tnp/_static/normaltnp.png" alt="Traducciones de Nacho Pacheco" /></a>
    <div class="social">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="esymfony" data-lang="es">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
    <div id="searchbox">
      <form class="searc " action="../../search.html" method="get">
      <input type="search" name="q" placeholder="Término a buscar" />
      <input type="submit" value="Ir" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
    

    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="session_configuration.html" title="Configurando sesiones y controladores de guardado"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="El componente HttpFoundation"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" >Componentes</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Fundamento <em>HTTP</em></a> &raquo;</li> 
      </ul>
    </div>
  </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="gestion-de-la-sesion">
<span id="index-0"></span><h1>Gestión de la sesión<a class="headerlink" href="#gestion-de-la-sesion" title="Enlazar permanentemente con este título">¶</a></h1>
<p>El componente <tt class="docutils literal"><span class="pre">HttpFoundation</span></tt> de <em>Symfony2</em> tiene un subsistema de sesión muy potente y flexible, que está diseñado para proporcionar la gestión de sesiones a través de una sencilla interfaz orientada a objetos, utilizando una variedad de controladores para el almacenamiento de la sesión.</p>
<p class="versionadded">
<span class="versionmodified">Nuevo en la versión 2.1: </span>La interfaz <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\SessionInterface</span></tt>, así como una serie de otros cambios, son nuevas a partir de <em>Symfony 2.1</em>.</p>
<p>Las sesiones se utilizan a través de la simple clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Session</span></tt> que implementa la interfaz <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\SessionInterface</span></tt>.</p>
<p>Ejemplo rápido:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Session\Session</span><span class="p">;</span>

<span class="nv">$session</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Session</span><span class="p">();</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">();</span>

<span class="c1">// establece y obtiene atributos de sesión</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Drak&#39;</span><span class="p">);</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>

<span class="c1">// configura mensajes flash</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;notice&#39;</span><span class="p">,</span> <span class="s1">&#39;Profile updated&#39;</span><span class="p">);</span>

<span class="c1">// recupera mensajes</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;notice&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">())</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;div class=&#39;flash-notice&#39;&gt;</span><span class="si">$message</span><span class="s2">&lt;/div&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las sesiones <em>Symfony</em> están diseñadas para sustituir varias funciones nativas de <em>PHP</em>.
Las aplicaciones deben evitar el uso de <tt class="docutils literal"><span class="pre">session_start()</span></tt>, <tt class="docutils literal"><span class="pre">session_regenerate_id()</span></tt>, `` session_id()``, <tt class="docutils literal"><span class="pre">session_name()</span></tt>, y <tt class="docutils literal"><span class="pre">session_destroy()</span></tt>, y en su lugar usar la <em>API</em> en la siguiente sección.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si bien se recomienda empezar una sesión explícitamente, unas sesiones de hecho empezarán bajo demanda, es decir, si se hace alguna petición de sesión para leer/escribir dato de sesión.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudencia</p>
<p class="last">Las sesiones de <em>Symfony</em> son incompatibles con la directiva <tt class="docutils literal"><span class="pre">ini</span></tt> <tt class="docutils literal"><span class="pre">session.auto_start</span> <span class="pre">=</span> <span class="pre">1</span></tt> de <em>PHP</em>. Esta directiva se debe apagar en <tt class="docutils literal"><span class="pre">php.ini</span></tt>, en las directivas del servidor web o en <tt class="docutils literal"><span class="pre">.htaccess</span></tt>.</p>
</div>
<div class="section" id="api-de-sesion">
<h2><em>API</em> de sesión<a class="headerlink" href="#api-de-sesion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Session</span></tt> implementa la interfaz <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\SessionInterface</span></tt>.</p>
<p>La clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Session</span></tt> tiene una <em>API</em> sencilla subdividida en un par de grupos.</p>
<p>Flujo de trabajo en la sesión</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_start" title="Symfony\Component\HttpFoundation\Session\Session::start()"><span class="pre">start()</span></a></tt>:
Inicia la sesión &#8212; no usa <tt class="docutils literal"><span class="pre">session_start()</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_migrate" title="Symfony\Component\HttpFoundation\Session\Session::migrate()"><span class="pre">migrate()</span></a></tt>:
Regenera el <tt class="docutils literal"><span class="pre">id</span></tt> de la sesión &#8212; no usa <tt class="docutils literal"><span class="pre">session_regenerate_id()</span></tt>&#8212;.
Opcionalmente, este método puede cambiar el tiempo de vida de la nueva <tt class="docutils literal"><span class="pre">cookie</span></tt> que será emitida al llamar a este método.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_invalidate" title="Symfony\Component\HttpFoundation\Session\Session::invalidate()"><span class="pre">invalidate()</span></a></tt>:
Limpia todos los datos de la sesión y regenera el <tt class="docutils literal"><span class="pre">id</span></tt> de la sesión. No usa <tt class="docutils literal"><span class="pre">session_destroy()</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_getId" title="Symfony\Component\HttpFoundation\Session\Session::getId()"><span class="pre">getId()</span></a></tt>: Recupera el <tt class="docutils literal"><span class="pre">id</span></tt> de la sesión. Sin usar <tt class="docutils literal"><span class="pre">session_id()</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_setId" title="Symfony\Component\HttpFoundation\Session\Session::setId()"><span class="pre">setId()</span></a></tt>: Establece el <tt class="docutils literal"><span class="pre">id</span></tt> de la sesión. Sin usar <tt class="docutils literal"><span class="pre">session_id()</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_getName" title="Symfony\Component\HttpFoundation\Session\Session::getName()"><span class="pre">getName()</span></a></tt>: Recupera el nombre de la sesión. Sin usar <tt class="docutils literal"><span class="pre">session_name()</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_setName" title="Symfony\Component\HttpFoundation\Session\Session::setName()"><span class="pre">setName()</span></a></tt>: Establece el nombre de la sesión. Sin usar <tt class="docutils literal"><span class="pre">session_name()</span></tt>.</li>
</ul>
<p>Atributos de la sesión</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_set" title="Symfony\Component\HttpFoundation\Session\Session::set()"><span class="pre">set()</span></a></tt>:
Establece un atributo por su clave;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_get" title="Symfony\Component\HttpFoundation\Session\Session::get()"><span class="pre">get()</span></a></tt>:
Recupera un atributo por su clave;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_all" title="Symfony\Component\HttpFoundation\Session\Session::all()"><span class="pre">all()</span></a></tt>:
Recupera todos los atributos como un arreglo de <tt class="docutils literal"><span class="pre">clave</span> <span class="pre">=&gt;</span> <span class="pre">valor</span></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_has" title="Symfony\Component\HttpFoundation\Session\Session::has()"><span class="pre">has()</span></a></tt>:
Devuelve <tt class="docutils literal"><span class="pre">true</span></tt> si el atributo existe;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_keys" title="Symfony\Component\HttpFoundation\Session\Session::keys()"><span class="pre">keys()</span></a></tt>:
Devuelve un arreglo de claves de atributo guardadas;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_replace" title="Symfony\Component\HttpFoundation\Session\Session::replace()"><span class="pre">replace()</span></a></tt>:
Establece múltiples atributos simultáneamente: toma un arreglo indexado y configura cada pareja <tt class="docutils literal"><span class="pre">clave</span> <span class="pre">=&gt;</span> <span class="pre">valor</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_remove" title="Symfony\Component\HttpFoundation\Session\Session::remove()"><span class="pre">remove()</span></a></tt>:
Elimina un atributo por clave;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_clear" title="Symfony\Component\HttpFoundation\Session\Session::clear()"><span class="pre">clear()</span></a></tt>:
Limpia todos los atributos;</li>
</ul>
<p>Internamente los atributos se almacenan en una <tt class="docutils literal"><span class="pre">«Bag»</span></tt> (&#8216;Bolsa&#8217;, en adelante), un objeto <em>PHP</em> que actúa como un arreglo. Unos cuantos métodos existentes para gestionar una <tt class="docutils literal"><span class="pre">«Bolsa»</span></tt>:</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_registerBag" title="Symfony\Component\HttpFoundation\Session\Session::registerBag()"><span class="pre">registerBag()</span></a></tt>:
Registra una <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\SessionBagInterface</span></tt></li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_getBag" title="Symfony\Component\HttpFoundation\Session\Session::getBag()"><span class="pre">getBag()</span></a></tt>:
Consigue una <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\SessionBagInterface</span></tt> por medio del nombre de la «Bolsa».</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_getFlashBag" title="Symfony\Component\HttpFoundation\Session\Session::getFlashBag()"><span class="pre">getFlashBag()</span></a></tt>:
Recupera la <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface</span></tt>.
Esta, únicamente es un conveniente atajo.</li>
</ul>
<p>Metadatos de sesión</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#method_getMetadataBag" title="Symfony\Component\HttpFoundation\Session\Session::getMetadataBag()"><span class="pre">getMetadataBag()</span></a></tt>:
Obtiene la clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\StorageMetadataBag</span></tt> la cual contiene información de la sesión.</li>
</ul>
</div>
<div class="section" id="gestionando-datos-de-sesion">
<h2>Gestionando datos de sesión<a class="headerlink" href="#gestionando-datos-de-sesion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La gestión de sesiones <em>PHP</em> requiere el uso de la superglobal <tt class="docutils literal"><span class="pre">$_SESSION</span></tt>, sin embargo, esto interfiere un poco con la comprobabilidad y encapsulación de código en un paradigma de programación orientado a objetos. Para ayudar a superar esta situación, <em>Symfony2</em> usa &#8216;bolsas de sesión&#8217; vinculadas a la sesión para encapsular un conjunto de datos específico a los &#8216;atributos&#8217; o &#8216;mensajes flash&#8217;.</p>
<p>Este enfoque también mitiga la contaminación del espacio de nombres dentro de la superglobal <tt class="docutils literal"><span class="pre">$_SESSION</span></tt>, porque cada bolsa almacena todos sus datos bajo un único espacio de nombres.
Esto le permite a <em>Symfony2</em> coexistir pacíficamente con otras aplicaciones o bibliotecas que puedan usar la superglobal <tt class="docutils literal"><span class="pre">$_SESSION</span></tt> y todos los datos siguen siendo totalmente compatibles con la gestión de sesiones de <em>Symfony2</em>.</p>
<p><em>Symfony2</em> ofrece 2 tipos de bolsas para almacenamiento, con dos implementaciones independientes.
Todo está escrito contra interfaces para que las puedas ampliar o crear tus propios tipos de bolsa si es necesario.</p>
<p><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\SessionBagInterface</span></tt> tiene la siguiente <em>API</em> destinada principalmente para uso interno:</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/SessionBagInterface.html#method_getStorageKey" title="Symfony\Component\HttpFoundation\Session\SessionBagInterface::getStorageKey()"><span class="pre">getStorageKey()</span></a></tt>:
Devuelve la clave, que en última instancia es la bolsa que va a almacenar tu arreglo bajo <tt class="docutils literal"><span class="pre">$_SESSION</span></tt>.
En general, puedes dejar este valor en su predefinido y es para uso interno.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/SessionBagInterface.html#method_initialize" title="Symfony\Component\HttpFoundation\Session\SessionBagInterface::initialize()"><span class="pre">initialize()</span></a></tt>:
<em>Symfony2</em> llama internamente a este método para almacenar clases de sesión con datos para vincularlos a la bolsa de la sesión.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/SessionBagInterface.html#method_getName" title="Symfony\Component\HttpFoundation\Session\SessionBagInterface::getName()"><span class="pre">getName()</span></a></tt>:
Devuelve el nombre de la bolsa de sesión.</li>
</ul>
</div>
<div class="section" id="atributos">
<h2><tt class="docutils literal"><span class="pre">Atributos</span></tt><a class="headerlink" href="#atributos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El propósito de la implementación de la <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface</span></tt> de bolsas, es manejar el almacenamiento de los atributos de la sesión. Esto puede incluir cosas como el <tt class="docutils literal"><span class="pre">id</span></tt> de usuario, y la funcionalidad «recuérdame» en la configuración del inicio de sesión u otra información basada en el estado del usuario.</p>
<ul class="simple">
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Attribute\AttributeBag</span></tt> Esta es la implementación estándar predeterminada.</li>
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag</span></tt> Esta implementación permite que los atributos sean almacenados en un espacio de nombres estructurado.</li>
</ul>
<p>Cualquier sistema de almacenamiento sencillo <tt class="docutils literal"><span class="pre">clave</span> <span class="pre">=&gt;</span> <span class="pre">valor</span></tt> está limitado en la medida en que se puedan almacenar datos complejos, ya que cada clave debe ser única. Lo puedes lograr introduciendo una convención a la nomenclatura de los espacios de nombres para que las claves sean partes diferentes de tu aplicación lo cual podría funcionar sin colisiones. Por ejemplo, <tt class="docutils literal"><span class="pre">modulo1.foo</span></tt> y <tt class="docutils literal"><span class="pre">modulo2.foo</span></tt>. Sin embargo, a veces esto no es muy práctico cuando los datos de los atributos están en un arreglo, por ejemplo, un conjunto de iniciales. En este caso, la gestión del arreglo se convierte en una carga porque hay que recuperar el arreglo, luego, procesarlo y almacenarlo de nuevo:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$tokens</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;tokens&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;a6c1e0b6&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;b&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;f4a7b1f3&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Así que cualquier procesamiento de este tipo rápidamente se puede poner feo, aunque sólo añadas un elemento al arreglo:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$tokens</span> <span class="o">=</span> <span class="nv">$session</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;tokens&#39;</span><span class="p">);</span>
<span class="nv">$tokens</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;tokens&#39;</span><span class="p">,</span> <span class="nv">$tokens</span><span class="p">);</span>
</pre></div>
</div>
<p>Con el espacio de nombre estructurado, la clave se puede trasladar a la estructura del arreglo tal cual usando un carácter del espacio de nombres (por omisión es <tt class="docutils literal"><span class="pre">/</span></tt>):</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;tokens/c&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
</pre></div>
</div>
<p>De esta manera puedes acceder a una clave dentro del arreglo almacenado directa y fácilmente.</p>
<p>La <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface</span></tt> cuenta con una <em>API</em> sencilla</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_set" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::set()"><span class="pre">set()</span></a></tt>:
Establece un atributo por su clave;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_get" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::get()"><span class="pre">get()</span></a></tt>:
Recupera un atributo por su clave;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_all" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::all()"><span class="pre">all()</span></a></tt>:
Recupera todos los atributos como un arreglo de <tt class="docutils literal"><span class="pre">clave</span> <span class="pre">=&gt;</span> <span class="pre">valor</span></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_has" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::has()"><span class="pre">has()</span></a></tt>:
Devuelve <tt class="docutils literal"><span class="pre">true</span></tt> si el atributo existe;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_keys" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::keys()"><span class="pre">keys()</span></a></tt>:
Devuelve un arreglo de claves de atributo guardadas;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_replace" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::replace()"><span class="pre">replace()</span></a></tt>:
Establece múltiples atributos simultáneamente: toma un arreglo indexado y configura cada pareja <tt class="docutils literal"><span class="pre">clave</span> <span class="pre">=&gt;</span> <span class="pre">valor</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_remove" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::remove()"><span class="pre">remove()</span></a></tt>:
Elimina un atributo por clave;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Attribute/AttributeBagInterface.html#method_clear" title="Symfony\Component\HttpFoundation\Session\Attribute\AttributeBagInterface::clear()"><span class="pre">clear()</span></a></tt>:
Vacía la bolsa;</li>
</ul>
</div>
<div class="section" id="mensajes-flash">
<h2>Mensajes flash<a class="headerlink" href="#mensajes-flash" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El propósito de la <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface</span></tt> es proporcionar una forma de configurar y recuperar mensajes basándose en la sesión.
El flujo de trabajo habitual de los mensajes flash se encuentra en una <tt class="docutils literal"><span class="pre">Petición</span></tt>, y se muestran después de redirigir a una página. Por ejemplo, un usuario envía un formulario que llegará a un controlador de actualización, y después de procesar el controlador redirige al usuario o bien a la página actualizada o a una página de error. Los mensajes flash establecidos en la <tt class="docutils literal"><span class="pre">Petición</span></tt> de página anterior se muestran inmediatamente al cargar la siguiente página en esa sesión.
Esta, sin embargo, sólo es una aplicación para los mensajes flash.</p>
<ul class="simple">
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Flash\AutoExpireFlashBag</span></tt> Esta implementación de mensajes se ajusta al cargar la página para que esté disponible para visualizarlo al cargar la siguiente página. Estos mensajes expirarán automáticamente independientemente de si se recuperan o no.</li>
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Flash\FlashBag</span></tt> En esta implementación, los mensajes se mantendrán en la sesión hasta que se recuperen o borren explícitamente. Esto hace posible el uso de la caché <em>ESI</em>.</li>
</ul>
<p>La <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface</span></tt> tiene una sencilla <em>API</em></p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_add" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::add()"><span class="pre">add()</span></a></tt>:
Añade un mensaje flash a la pila del tipo especificado;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_set" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::set()"><span class="pre">set()</span></a></tt>:
Configura mensajes flash por tipo;  Este método toma ambos, mensajes como una <tt class="docutils literal"><span class="pre">cadena</span></tt> o varios mensajes en un <tt class="docutils literal"><span class="pre">arreglo</span></tt>.</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_get" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::get()"><span class="pre">get()</span></a></tt>:
Recupera mensajes por tipo y los quita de la bolsa;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_setAll" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::setAll()"><span class="pre">setAll()</span></a></tt>:
Establece todos los flashes, acepta un arreglo de arreglos indexado <tt class="docutils literal"><span class="pre">tipo</span> <span class="pre">=&gt;</span> <span class="pre">array(mensajes)</span></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_all" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::all()"><span class="pre">all()</span></a></tt>:
Recupera todos los mensajes flash (en forma de arreglo de arreglos indexado) y quita los mensajes de la bolsa;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_peek" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::peek()"><span class="pre">peek()</span></a></tt>:
Recupera mensajes flash por tipo (sólo lectura);</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_peekAll" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::peekAll()"><span class="pre">peekAll()</span></a></tt>:
Recupera todos los mensajes flash (sólo lectura) como arreglo de arreglos indexado;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_has" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::has()"><span class="pre">has()</span></a></tt>:
Devuelve <tt class="docutils literal"><span class="pre">true</span></tt> si el tipo existe, <tt class="docutils literal"><span class="pre">false</span></tt> en caso contrario;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_keys" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::keys()"><span class="pre">keys()</span></a></tt>:
Devuelve un arreglo de tipos flash guardados;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBagInterface.html#method_clear" title="Symfony\Component\HttpFoundation\Session\Flash\FlashBagInterface::clear()"><span class="pre">clear()</span></a></tt>:
Limpia la bolsa;</li>
</ul>
<p>Para aplicaciones simples por lo general es suficiente tener un mensaje flash por tipo, por ejemplo, un aviso de confirmación después de enviar un formulario. Sin embargo, los mensajes Flash se almacenan en un arreglo indexado por el <tt class="docutils literal"><span class="pre">$tipo</span></tt> del flash, lo cual significa que tu aplicación puede emitir varios mensajes de un determinado tipo. Esto te permite utilizar la <em>API</em> para mensajes más complejos en tu aplicación.</p>
<p>Ejemplos de configuración de múltiples mensajes flash:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Session\Session</span><span class="p">;</span>

<span class="nv">$session</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Session</span><span class="p">();</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">();</span>

<span class="c1">// añade mensajes flash</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span>
    <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Your config file is writable, it should be set read-only&#39;</span>
<span class="p">);</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;Failed to update name&#39;</span><span class="p">);</span>
<span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;Another error&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Para exhibir los mensajes flash puedes usar algo como esto:</p>
<p>Simple, muestra un tipo de mensaje:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// muestra advertencias</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">())</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;div class=&#39;flash-warning&#39;&gt;</span><span class="si">$message</span><span class="s2">&lt;/div&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// muestra errores</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">())</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;div class=&#39;flash-error&#39;&gt;</span><span class="si">$message</span><span class="s2">&lt;/div&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Método compacto para procesar la exhibición simultánea de todos los mensajes:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">foreach</span> <span class="p">(</span><span class="nv">$session</span><span class="o">-&gt;</span><span class="na">getFlashBag</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$type</span> <span class="o">=&gt;</span> <span class="nv">$messages</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&quot;&lt;div class=&#39;flash-</span><span class="si">$type</span><span class="s2">&#39;&gt;</span><span class="si">$message</span><span class="s2">&lt;/div&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <a href="https://github.com/symfony/symfony-standard"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://gitnacho.github.com/tnp/img/comun/bifurcame.png" alt="Bifúrcame en GitHub" /></a>
  
  <div style="width:740px;margin:10px auto;">
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="session_configuration.html" title="Configurando sesiones y controladores de guardado"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="El componente HttpFoundation"
             >anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" >Componentes</a> &raquo;</li>
          <li><a href="index.html" >Fundamento <em>HTTP</em></a> &raquo;</li> 
      </ul>
    </div>
  </div>


   <div style="width: 740px; margin: 0 auto;">
     <div id="disqus_thread"></div>
     
    <div class="footer">
        &copy; Copyright 2011-2013, Traducido por Nacho Pacheco.
      Actualizado por última vez en Jan 16, 2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
   </div>
   <script type="text/javascript">
    var disqus_shortname = 'documentos-mx';
    var disqus_developer = 1;
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script>
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>