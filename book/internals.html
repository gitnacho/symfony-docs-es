
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Funcionamiento interno &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../_static/tnp.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.15',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/icotnp.ico"/>
    <link rel="top" title="Manual de Symfony2 en Español" href="../index.html" />
    <link rel="up" title="Libro" href="index.html" />
    <link rel="next" title="API estable de Symfony2" href="stable_api.html" />
    <link rel="prev" title="Rendimiento" href="performance.html" /> 
  </head>
  <body>
  <div class="imalogo">
    
  <a href="../index.html"><img src="http://gitnacho.github.com/tnp/img/sf/logo-big.gif" alt="Edición estándar de Symfony2" />
  
    <a href="http://gitnacho.github.com/tnp/"><img src="http://gitnacho.github.com/tnp/_static/normaltnp.png" alt="Traducciones de Nacho Pacheco" /></a>
    <div class="social">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="esymfony" data-lang="es">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
    <div id="searchbox">
      <form class="searc " action="../search.html" method="get">
      <input type="search" name="q" placeholder="Término a buscar" />
      <input type="submit" value="Ir" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
    

    
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="stable_api.html" title="API estable de Symfony2"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="performance.html" title="Rendimiento"
             accesskey="P">anterior</a> |</li>
        <li><a href="../index.html">en Español</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Libro</a> &raquo;</li> 
      </ul>
    </div>
  </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="funcionamiento-interno">
<span id="index-0"></span><h1>Funcionamiento interno<a class="headerlink" href="#funcionamiento-interno" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Parece que quieres entender cómo funciona y cómo extender <em>Symfony2</em>.
¡Eso me hace muy feliz! Esta sección es una explicación en profundidad de <em>Symfony2</em> desde dentro.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Necesitas leer esta sección sólo si quieres entender cómo funciona <em>Symfony2</em> detrás de la escena, o si deseas extender <em>Symfony2</em>.</p>
</div>
<div class="section" id="descripcion">
<h2>Descripción<a class="headerlink" href="#descripcion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El código <em>Symfony2</em> está hecho de varias capas independientes. Cada capa está construida en lo alto de la anterior.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La carga automática no la gestiona la plataforma directamente; sino que se hace independientemente con la ayuda de la clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\ClassLoader\UniversalClassLoader</span></tt> y el archivo <tt class="file docutils literal"><span class="pre">src/autoload.php</span></tt>. Lee el <a class="reference internal" href="../components/class_loader.html"><em>capítulo dedicado</em></a> para más información.</p>
</div>
<div class="section" id="componente-httpfoundation">
<h3>Componente <tt class="docutils literal"><span class="pre">HttpFoundation</span></tt><a class="headerlink" href="#componente-httpfoundation" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Al nivel más profundo está el componente <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation.html" title="Symfony\Component\HttpFoundation"><span class="pre">HttpFoundation</span></a></tt>. <tt class="docutils literal"><span class="pre">HttpFoundation</span></tt> proporciona los principales objetos necesarios para hacer frente a <em>HTTP</em>.
Es una abstracción orientada a objetos de algunas funciones y variables nativas de <em>PHP</em>:</p>
<ul class="simple">
<li>La clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Request</span></tt> resume las principales variables globales de <em>PHP</em>, tales como <tt class="docutils literal"><span class="pre">$_GET</span></tt>, <tt class="docutils literal"><span class="pre">$_POST</span></tt>, <tt class="docutils literal"><span class="pre">$_COOKIE</span></tt>, <tt class="docutils literal"><span class="pre">$_FILES</span></tt> y <tt class="docutils literal"><span class="pre">$_SERVER</span></tt>;</li>
<li>La clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Response</span></tt> abstrae algunas funciones <em>PHP</em> como <tt class="docutils literal"><span class="pre">header()</span></tt>, <tt class="docutils literal"><span class="pre">setcookie()</span></tt> y <tt class="docutils literal"><span class="pre">echo</span></tt>;</li>
<li>La clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Session</span></tt> y la interfaz <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\SessionStorage\SessionStorageInterface</span></tt>, abstraen la gestión de sesiones y las funciones <tt class="docutils literal"><span class="pre">session_*()</span></tt>.</li>
</ul>
</div>
<div class="section" id="componente-httpkernel">
<h3>Componente <tt class="docutils literal"><span class="pre">HttpKernel</span></tt><a class="headerlink" href="#componente-httpkernel" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En lo alto de <tt class="docutils literal"><span class="pre">HttpFoundation</span></tt> está el componente <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpKernel.html" title="Symfony\Component\HttpKernel"><span class="pre">HttpKernel</span></a></tt>. <tt class="docutils literal"><span class="pre">HttpKernel</span></tt> se encarga de la parte dinámica de <em>HTTP</em>; es una fina capa en la parte superior de las clases <tt class="docutils literal"><span class="pre">Petición</span></tt> y <tt class="docutils literal"><span class="pre">Respuesta</span></tt> para estandarizar la forma en que se manejan las peticiones. Este, también proporciona puntos de extensión y herramientas que lo convierten en el punto de partida ideal para crear una plataforma <em>Web</em> sin demasiado trabajo.</p>
<p>Además, opcionalmente añade configurabilidad y extensibilidad, gracias al componente de inyección de dependencias y un potente sistema de complementos (paquetes).</p>
<div class="admonition-ver-tambien admonition seealso">
<p class="first admonition-title">Ver también</p>
<p class="last">Lee más sobre la <a class="reference internal" href="service_container.html"><em>Inyección de dependencias</em></a> y los <a class="reference internal" href="../cookbook/bundles/best_practices.html"><em>Paquetes</em></a>.</p>
</div>
</div>
<div class="section" id="paquete-frameworkbundle">
<h3>Paquete <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt><a class="headerlink" href="#paquete-frameworkbundle" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El paquete <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Bundle/FrameworkBundle.html" title="Symfony\Bundle\FrameworkBundle"><span class="pre">FrameworkBundle</span></a></tt> es el paquete que une los principales componentes y bibliotecas para hacer una plataforma <em>MVC</em> ligera y rápida. Este viene con una configuración predeterminada sensible y convenios para facilitar la curva de aprendizaje.</p>
</div>
</div>
<div class="section" id="kernel">
<span id="index-1"></span><h2><tt class="docutils literal"><span class="pre">Kernel</span></tt><a class="headerlink" href="#kernel" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\HttpKernel</span></tt> es la clase central de <em>Symfony2</em> y es responsable de procesar las peticiones del cliente. Su objetivo principal es &#8220;convertir&#8221; un objeto <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Request</span></tt> a un objeto <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Response</span></tt>.</p>
<p>Cada <tt class="docutils literal"><span class="pre">Kernel</span></tt> de <em>Symfony2</em> implementa <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\HttpKernelInterface</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$type</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">MASTER_REQUEST</span><span class="p">,</span> <span class="nv">$catch</span> <span class="o">=</span> <span class="k">true</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="controladores">
<span id="index-2"></span><h3>Controladores<a class="headerlink" href="#controladores" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para convertir una <tt class="docutils literal"><span class="pre">Petición</span></tt> a una <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, el <tt class="docutils literal"><span class="pre">Kernel</span></tt> cuenta con un <tt class="docutils literal"><span class="pre">&quot;Controlador&quot;</span></tt>. Un controlador puede ser cualquier <em>PHP</em> ejecutable válido.</p>
<p>El <tt class="docutils literal"><span class="pre">Kernel</span></tt> delega la selección de cual controlador se debe ejecutar a una implementación de <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Controller\ControllerResolverInterface</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">getController</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">);</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">getArguments</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$controller</span><span class="p">);</span>
</pre></div>
</div>
<p>El método <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpKernel/Controller/ControllerResolverInterface.html#method_getController" title="Symfony\Component\HttpKernel\Controller\ControllerResolverInterface::getController()"><span class="pre">getController()</span></a></tt> devuelve el controlador (un <em>PHP</em> ejecutable) asociado a la petición dada. La implementación predeterminada de (<tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Controller\ControllerResolver</span></tt>) busca un atributo <tt class="docutils literal"><span class="pre">_controller</span></tt> en la petición que representa el nombre del controlador (una cadena &#8220;clase::método&#8221;, cómo <tt class="docutils literal"><span class="pre">Bundle\BlogBundle\PostController:indexAction</span></tt>).</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La implementación predeterminada utiliza la clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\EventListener\RouterListener</span></tt> para definir el atributo <tt class="docutils literal"><span class="pre">_controller</span></tt> de la petición (consulta <a class="reference internal" href="#kernel-core-request"><em>Evento kernel.request</em></a>).</p>
</div>
<p>El método <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpKernel/Controller/ControllerResolverInterface.html#method_getArguments" title="Symfony\Component\HttpKernel\Controller\ControllerResolverInterface::getArguments()"><span class="pre">getArguments()</span></a></tt> devuelve una matriz de argumentos para pasarla al Controlador ejecutable. La implementación predeterminada automáticamente resuelve los argumentos del método, basándose en los atributos de la Petición.</p>
<div class="sidebar">
<p class="first sidebar-title">Cuadrando los argumentos del método <tt class="docutils literal"><span class="pre">Controlador</span></tt> desde los atributos de la <tt class="docutils literal"><span class="pre">Petición</span></tt></p>
<p>Por cada argumento del método, <em>Symfony2</em> trata de obtener el valor de un atributo de la <tt class="docutils literal"><span class="pre">Petición</span></tt> con el mismo nombre. Si no se proporciona, el valor predeterminado es el argumento utilizado de estar definido:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="c1">// Symfony2 debe buscar un atributo &#39;id&#39; (obligatorio)</span>
<span class="c1">//  y un &#39;admin&#39; (opcional)</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="nv">$admin</span> <span class="o">=</span> <span class="k">true</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="procesando-peticiones">
<span id="index-3"></span><h3>Procesando peticiones<a class="headerlink" href="#procesando-peticiones" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El método <tt class="docutils literal"><span class="pre">handle()</span></tt> toma una <tt class="docutils literal"><span class="pre">Petición</span></tt> y <em>siempre</em> devuelve una <tt class="docutils literal"><span class="pre">Respuesta</span></tt>.
Para convertir la <tt class="docutils literal"><span class="pre">Petición</span></tt>, <tt class="docutils literal"><span class="pre">handle()</span></tt> confía en el mecanismo de resolución y una cadena ordenada de notificaciones de evento (consulta la siguiente sección para más información acerca de cada evento):</p>
<ol class="arabic simple">
<li>Antes de hacer cualquier otra cosa, difunde el evento <tt class="docutils literal"><span class="pre">kernel.request</span></tt> &#8212;si alguno de los escuchas devuelve una <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, salta directamente al paso 8;</li>
<li>El mecanismo de resolución es llamado para determinar el controlador a ejecutar;</li>
<li>Los escuchas del evento <tt class="docutils literal"><span class="pre">kernel.controller</span></tt> ahora pueden manipular el controlador ejecutable como quieras (cambiarlo, envolverlo, ...);</li>
<li>El núcleo verifica que el controlador en realidad es un <em>PHP</em> ejecutable válido;</li>
<li>Se llama al mecanismo de resolución para determinar los argumentos a pasar al controlador;</li>
<li>El <tt class="docutils literal"><span class="pre">Kernel</span></tt> llama al controlador;</li>
<li>Si el controlador no devuelve una <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, los escuchas del evento <tt class="docutils literal"><span class="pre">kernel.view</span></tt> pueden convertir en <tt class="docutils literal"><span class="pre">Respuesta</span></tt> el valor devuelto por el Controlador;</li>
<li>Los escuchas del evento <tt class="docutils literal"><span class="pre">kernel.response</span></tt> pueden manipular la <tt class="docutils literal"><span class="pre">Respuesta</span></tt> (contenido y cabeceras);</li>
<li>Devuelve la respuesta.</li>
</ol>
<p>Si se produce una Excepción durante el procesamiento, difunde la <tt class="docutils literal"><span class="pre">kernel.exception</span></tt> y se da la oportunidad a los escuchas de convertir la excepción en una <tt class="docutils literal"><span class="pre">Respuesta</span></tt>. Si esto funciona, se difunde el evento <tt class="docutils literal"><span class="pre">kernel.response</span></tt>; si no, se vuelve a lanzar la excepción.</p>
<p>Si no deseas que se capturen las Excepciones (para peticiones incrustadas, por ejemplo), desactiva el evento <tt class="docutils literal"><span class="pre">kernel.exception</span></tt> pasando <tt class="docutils literal"><span class="pre">false</span></tt> como tercer argumento del método <tt class="docutils literal"><span class="pre">handle()</span></tt>.</p>
</div>
<div class="section" id="funcionamiento-interno-de-las-peticiones">
<span id="index-4"></span><h3>Funcionamiento interno de las peticiones<a class="headerlink" href="#funcionamiento-interno-de-las-peticiones" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En cualquier momento durante el manejo de una petición (la &#8216;maestra&#8217; uno), puede manejar una subpetición. Puedes pasar el tipo de petición al método <tt class="docutils literal"><span class="pre">handle()</span></tt> (su segundo argumento):</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">HttpKernelInterface::MASTER_REQUEST</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">HttpKernelInterface::SUB_REQUEST</span></tt>.</li>
</ul>
<p>El tipo se pasa a todos los eventos y los escuchas pueden actuar en consecuencia (algún procesamiento sólo debe ocurrir en la petición maestra).</p>
</div>
<div class="section" id="eventos">
<span id="index-5"></span><h3>Eventos<a class="headerlink" href="#eventos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cada evento lanzado por el <tt class="docutils literal"><span class="pre">Kernel</span></tt> es una subclase de <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Event\KernelEvent</span></tt>. Esto significa que cada evento tiene acceso a la misma información básica:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">getRequestType()</span></tt> &#8212; devuelve el <em>tipo</em> de la petición   (<tt class="docutils literal"><span class="pre">HttpKernelInterface::MASTER_REQUEST</span></tt> o <tt class="docutils literal"><span class="pre">HttpKernelInterface::SUB_REQUEST</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">getKernel()</span></tt> &#8212; devuelve el <tt class="docutils literal"><span class="pre">Kernel</span></tt> que está procesando la petición;</li>
<li><tt class="docutils literal"><span class="pre">getRequest()</span></tt> &#8212; devuelve la <tt class="docutils literal"><span class="pre">Petición</span></tt> que se está procesando actualmente.</li>
</ul>
<div class="section" id="getrequesttype">
<h4><tt class="docutils literal"><span class="pre">getRequestType()</span></tt><a class="headerlink" href="#getrequesttype" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El método <tt class="docutils literal"><span class="pre">getRequestType()</span></tt> permite a los escuchas conocer el tipo de la petición. Por ejemplo, si un escucha sólo debe estar atento a las peticiones maestras, agrega el siguiente código al principio de tu método escucha:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\HttpKernelInterface</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">HttpKernelInterface</span><span class="o">::</span><span class="na">MASTER_REQUEST</span> <span class="o">!==</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getRequestType</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// regresa inmediatamente</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Si todavía no estás familiarizado con el <em>Despachador de eventos</em> de <em>Symfony2</em>, primero lee la sección del <a class="reference internal" href="../components/event_dispatcher/introduction.html"><em>Componente despachador de eventos</em></a>.</p>
</div>
</div>
<div class="section" id="evento-kernel-request">
<span id="kernel-core-request"></span><span id="index-6"></span><h4>Evento <tt class="docutils literal"><span class="pre">kernel.request</span></tt><a class="headerlink" href="#evento-kernel-request" title="Enlazar permanentemente con este título">¶</a></h4>
<p><em>Clase del evento</em>: <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Event\GetResponseEvent</span></tt></p>
<p>El objetivo de este evento es devolver inmediatamente un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> o variables de configuración para poder invocar un controlador después del evento. Cualquier escucha puede devolver un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> a través del método <tt class="docutils literal"><span class="pre">setResponse()</span></tt> en el evento. En este caso, todos los otros escuchas no serán llamados.</p>
<p>Este evento lo utiliza el <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt> para llenar el atributo <tt class="docutils literal"><span class="pre">_controller</span></tt> de la <tt class="docutils literal"><span class="pre">Petición</span></tt>, a través de <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\EventListener\RouterListener</span></tt>. <tt class="docutils literal"><span class="pre">RequestListener</span></tt> usa un objeto <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\Routing\RouterInterface</span></tt> para coincidir la <tt class="docutils literal"><span class="pre">Petición</span></tt> y determinar el nombre del controlador (guardado en el atributo <tt class="docutils literal"><span class="pre">_controller</span></tt> de la  <tt class="docutils literal"><span class="pre">Petición</span></tt>).</p>
</div>
<div class="section" id="evento-kernel-controller">
<span id="index-7"></span><h4>Evento <tt class="docutils literal"><span class="pre">kernel.controller</span></tt><a class="headerlink" href="#evento-kernel-controller" title="Enlazar permanentemente con este título">¶</a></h4>
<p><em>Clase del evento</em>: <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Event\FilterControllerEvent</span></tt></p>
<p>Este evento no lo utiliza <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt>, pero puede ser un punto de entrada para modificar el controlador que se debe ejecutar:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\Event\FilterControllerEvent</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">onKernelController</span><span class="p">(</span><span class="nx">FilterControllerEvent</span> <span class="nv">$event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$controller</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getController</span><span class="p">();</span>
    <span class="c1">// ...</span>

    <span class="c1">// el controlador se puede cambiar a cualquier PHP ejecutable</span>
    <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">setController</span><span class="p">(</span><span class="nv">$controller</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="evento-kernel-view">
<span id="index-8"></span><h4>Evento <tt class="docutils literal"><span class="pre">kernel.view</span></tt><a class="headerlink" href="#evento-kernel-view" title="Enlazar permanentemente con este título">¶</a></h4>
<p><em>Clase del evento</em>: <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent</span></tt></p>
<p>Este evento no lo utiliza el <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt>, pero lo puedes usar para implementar un subsistema de vistas. Este evento se llama <em>sólo</em> si el controlador <em>no</em> devuelve un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>. El propósito del evento es permitir que algún otro valor de retorno se convierta en una <tt class="docutils literal"><span class="pre">Respuesta</span></tt>.</p>
<p>El valor devuelto por el controlador es accesible a través del método <tt class="docutils literal"><span class="pre">getControllerResult</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">onKernelView</span><span class="p">(</span><span class="nx">GetResponseForControllerResultEvent</span> <span class="nv">$event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$val</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getControllerResult</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">();</span>
    <span class="c1">// De alguna manera modifica la respuesta desde el valor de retorno</span>

    <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">setResponse</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="evento-kernel-response">
<span id="index-9"></span><h4>Evento <tt class="docutils literal"><span class="pre">kernel.response</span></tt><a class="headerlink" href="#evento-kernel-response" title="Enlazar permanentemente con este título">¶</a></h4>
<p><em>Clase del evento</em>: <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Event\FilterResponseEvent</span></tt></p>
<p>El propósito de este evento es permitir que otros sistemas modifiquen o sustituyan el objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> después de su creación:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">onKernelResponse</span><span class="p">(</span><span class="nx">FilterResponseEvent</span> <span class="nv">$event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getResponse</span><span class="p">();</span>
    <span class="c1">// .. modifica el objeto Respuesta</span>
<span class="p">}</span>
</pre></div>
</div>
<p>El <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt> registra varios escuchas:</p>
<ul class="simple">
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\EventListener\ProfilerListener</span></tt>:
recoge los datos de la petición actual;</li>
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Bundle\WebProfilerBundle\EventListener\WebDebugToolbarListener</span></tt>:
inyecta la barra de herramientas de depuración web;</li>
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\EventListener\ResponseListener</span></tt>: fija el <tt class="docutils literal"><span class="pre">Content-Type</span></tt> de la respuesta basándose en el formato de la petición;</li>
<li><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\EventListener\EsiListener</span></tt>: agrega una cabecera <em>HTTP</em> <tt class="docutils literal"><span class="pre">Surrogate-Control</span></tt> cuando es necesario analizar etiquetas <em>ESI</em> en la respuesta.</li>
</ul>
</div>
<div class="section" id="evento-kernel-exception">
<span id="kernel-kernel-exception"></span><span id="index-10"></span><h4>Evento <tt class="docutils literal"><span class="pre">kernel.exception</span></tt><a class="headerlink" href="#evento-kernel-exception" title="Enlazar permanentemente con este título">¶</a></h4>
<p><em>Clase del evento</em>: <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent</span></tt></p>
<p><tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt> registra un <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\HttpKernel\EventListener\ExceptionListener</span></tt> el cual remite la <tt class="docutils literal"><span class="pre">Petición</span></tt> a un determinado controlador (el valor del parámetro <tt class="docutils literal"><span class="pre">exception_listener.controller</span></tt> &#8212; debe estar en notación <tt class="docutils literal"><span class="pre">clase::método</span></tt>&#8212;).</p>
<p>Un escucha en este evento puede crear y establecer un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, crear y establecer un nuevo objeto <tt class="docutils literal"><span class="pre">Excepción</span></tt>, o simplemente no hacer nada:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">onKernelException</span><span class="p">(</span><span class="nx">GetResponseForExceptionEvent</span> <span class="nv">$event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$exception</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getException</span><span class="p">();</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">();</span>
    <span class="c1">// configura el objeto respuesta basándose en la excepción capturada</span>
    <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">setResponse</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>

    <span class="c1">// alternativamente puedes establecer una nueva excepción</span>
    <span class="c1">// $exception = new \Exception(&#39;Some special exception&#39;);</span>
    <span class="c1">// $event-&gt;setException($exception);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="el-despachador-de-eventos">
<span id="index-11"></span><h2>El despachador de eventos<a class="headerlink" href="#el-despachador-de-eventos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El despachador de eventos es un componente independiente que es el responsable de mucha de la lógica y flujo subyacente detrás de una petición <em>Symfony</em>. Para más información consulta la documentación del <a class="reference internal" href="../components/event_dispatcher/introduction.html"><em>Componente despachador de eventos</em></a>.</p>
</div>
<div class="section" id="generador-de-perfiles">
<span id="internals-profiler"></span><span id="index-12"></span><h2>Generador de perfiles<a class="headerlink" href="#generador-de-perfiles" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Cuando se activa, el generador de perfiles de <em>Symfony2</em> recoge información útil sobre cada petición presentada a tu aplicación y la almacena para su posterior análisis. Utiliza el generador de perfiles en el entorno de desarrollo para que te ayude a depurar tu código y mejorar el rendimiento; úsalo en el entorno de producción para explorar problemas después del hecho.</p>
<p>Rara vez tienes que lidiar con el generador de perfiles directamente puesto que <em>Symfony2</em> proporciona herramientas de visualización como la barra de herramientas de depuración web y el generador de perfiles web. Si utilizas la <em>edición estándar de Symfony2</em>, el generador de perfiles, la barra de herramientas de depuración web, y el generador de perfiles web, ya están configurados con ajustes razonables.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El generador de perfiles recopila información para todas las peticiones (peticiones simples, redirecciones, excepciones, peticiones <em>Ajax</em>, peticiones <em>ESI</em>;  y para todos los métodos <em>HTTP</em> y todos los formatos). Esto significa que para una única <em>URL</em>, puedes tener varios perfiles de datos asociados (un par petición/respuesta externa).</p>
</div>
<div class="section" id="visualizando-perfiles-de-datos">
<span id="index-13"></span><h3>Visualizando perfiles de datos<a class="headerlink" href="#visualizando-perfiles-de-datos" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="section" id="usando-la-barra-de-depuracion-web">
<h4>Usando la barra de depuración web<a class="headerlink" href="#usando-la-barra-de-depuracion-web" title="Enlazar permanentemente con este título">¶</a></h4>
<p>En el entorno de desarrollo, la barra de depuración web está disponible en la parte inferior de todas las páginas. Esta muestra un buen resumen de los datos perfilados que te da acceso instantáneo a una gran cantidad de información útil cuando algo no funciona como esperabas.</p>
<p>Si el resumen presentado por las herramientas de la barra de depuración web no es suficiente, haz clic en el enlace simbólico (una cadena compuesta de 13 caracteres aleatorios) para acceder al generador de perfiles web.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si no se puede hacer clic en el enlace, significa que las rutas del generador de perfiles no están registradas (más abajo hay información de configuración).</p>
</div>
</div>
<div class="section" id="analizando-datos-del-perfil-con-el-generador-de-perfiles-web">
<h4>Analizando datos del perfil con el generador de perfiles web<a class="headerlink" href="#analizando-datos-del-perfil-con-el-generador-de-perfiles-web" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El generador de perfiles web es una herramienta de visualización para perfilar datos que puedes utilizar en desarrollo para depurar tu código y mejorar el rendimiento; pero también lo puedes utilizar para explorar problemas que ocurren en producción. Este expone toda la información recogida por el generador de perfiles en una interfaz web.</p>
</div>
<div class="section" id="accediendo-a-informacion-del-generador-de-perfiles">
<span id="index-14"></span><h4>Accediendo a información del generador de perfiles<a class="headerlink" href="#accediendo-a-informacion-del-generador-de-perfiles" title="Enlazar permanentemente con este título">¶</a></h4>
<p>No es necesario utilizar el visualizador predeterminado para acceder a la información de perfiles. Pero ¿cómo se puede recuperar información de perfiles de una petición específica después del hecho? Cuando el generador de perfiles almacena datos sobre una <tt class="docutils literal"><span class="pre">Petición</span></tt>, también le asocia un símbolo; esta muestra está disponible en la cabecera <em>HTTP</em> <tt class="docutils literal"><span class="pre">X-Debug-Token</span></tt> de la Respuesta:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$profile</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;profiler&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">loadProfileFromResponse</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>

<span class="nv">$profile</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;profiler&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">loadProfile</span><span class="p">(</span><span class="nv">$token</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando el generador de perfiles está habilitado pero no la barra de herramientas de depuración <em>web</em>, o cuando desees obtener el símbolo de una petición <em>Ajax</em>, utiliza una herramienta como <em>Firebug</em> para obtener el valor de la cabecera <em>HTTP</em> <tt class="docutils literal"><span class="pre">X-Debug-Token</span></tt>.</p>
</div>
<p>Usa el método <tt class="docutils literal"><span class="pre">find()</span></tt> para acceder a elementos basándose en algún criterio:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// consigue los 10 últimas fragmentos</span>
<span class="nv">$tokens</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;profiler&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

<span class="c1">// consigue los 10 últimos fragmentos de todas las URL que contienen /admin/</span>
<span class="nv">$tokens</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;profiler&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;/admin/&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

<span class="c1">// consigue los 10 últimos fragmentos de peticiones locales</span>
<span class="nv">$tokens</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;profiler&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
<p>Si deseas manipular los datos del perfil en una máquina diferente a la que generó la información, utiliza los métodos <tt class="docutils literal"><span class="pre">export()</span></tt> e <tt class="docutils literal"><span class="pre">import()</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// en la máquina en producción</span>
<span class="nv">$profile</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;profiler&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">loadProfile</span><span class="p">(</span><span class="nv">$token</span><span class="p">);</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nv">$profiler</span><span class="o">-&gt;</span><span class="na">export</span><span class="p">(</span><span class="nv">$profile</span><span class="p">);</span>

<span class="c1">// en la máquina de desarrollo</span>
<span class="nv">$profiler</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="configurando">
<span id="index-15"></span><h4>Configurando<a class="headerlink" href="#configurando" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La configuración predeterminada de <em>Symfony2</em> viene con ajustes razonables para el generador de perfiles, la barra de herramientas de depuración web, y el generador de perfiles web. Aquí está por ejemplo la configuración para el entorno de desarrollo:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># carga el generador de perfiles</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">profiler</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">only_exceptions</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>

<span class="c1"># activa el generador de perfiles web</span>
<span class="l-Scalar-Plain">web_profiler</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">toolbar</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">intercept_redirects</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">verbose</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- xmlns:webprofiler=&quot;http://symfony.com/schema/dic/webprofiler&quot; --&gt;</span>
<span class="c">&lt;!-- xsi:schemaLocation=&quot;http://symfony.com/schema/dic/webprofiler http://symfony.com/schema/dic/webprofiler/webprofiler-1.0.xsd&quot;&gt; --&gt;</span>

<span class="c">&lt;!-- carga el generador de perfiles --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:profiler</span> <span class="na">only-exceptions=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- activa el generador de perfiles web --&gt;</span>
<span class="nt">&lt;webprofiler:config</span>
    <span class="na">toolbar=</span><span class="s">&quot;true&quot;</span>
    <span class="na">intercept-redirects=</span><span class="s">&quot;true&quot;</span>
    <span class="na">verbose=</span><span class="s">&quot;true&quot;</span>
<span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// carga el generador de perfiles</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;profiler&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;only-exceptions&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">),</span>
<span class="p">));</span>

<span class="c1">// activa el generador de perfiles web</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;web_profiler&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;toolbar&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="s1">&#39;intercept-redirects&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="s1">&#39;verbose&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Cuando <tt class="docutils literal"><span class="pre">only-exceptions</span></tt> se establece a <tt class="docutils literal"><span class="pre">true</span></tt>, el generador de perfiles sólo recoge datos cuando tu aplicación lanza una excepción.</p>
<p>Cuando <tt class="docutils literal"><span class="pre">intercept-redirects</span></tt> está establecido en <tt class="docutils literal"><span class="pre">true</span></tt>, el generador de perfiles web intercepta las redirecciones y te da la oportunidad de analizar los datos recogidos antes de seguir la redirección.</p>
<p>Cuando <tt class="docutils literal"><span class="pre">verbose</span></tt> está establecido en <tt class="docutils literal"><span class="pre">true</span></tt>, la barra de herramientas de depuración web muestra una gran cantidad de información. Configurar <tt class="docutils literal"><span class="pre">verbose</span></tt> a <tt class="docutils literal"><span class="pre">false</span></tt> oculta algo de información secundaria para hacer más corta la barra de herramientas.</p>
<p>Si activas el generador de perfiles web, también es necesario montar las rutas de los perfiles:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><pre>_profiler:
    resource: @WebProfilerBundle/Resources/config/routing/profiler.xml
    prefix:   /_profiler</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;@WebProfilerBundle/Resources/config/routing/profiler.xml&quot;</span> <span class="na">prefix=</span><span class="s">&quot;/_profiler&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">addCollection</span><span class="p">(</span><span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s2">&quot;@WebProfilerBundle/Resources/config/routing/profiler.xml&quot;</span><span class="p">),</span> <span class="s1">&#39;/_profiler&#39;</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Dado que el generador de perfiles añade algo de sobrecarga, posiblemente desees activarlo sólo bajo ciertas circunstancias en el entorno de producción. La configuración <tt class="docutils literal"><span class="pre">only-exceptions</span></tt> limita al generador de perfiles a 500 páginas, ¿pero si quieres obtener información cuando el cliente <em>IP</em> proviene de una dirección específica, o para una parte limitada de la página web? Puedes utilizar una emparejadora de petición:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># activa el generador de perfiles sólo para peticiones entrantes de la red 192.168.0.0</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">profiler</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">matcher</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">ip</span><span class="p-Indicator">:</span> <span class="nv">192.168.0.0/24</span> <span class="p-Indicator">}</span>

<span class="c1"># activa el generador de perfiles sólo para las URL /admin</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">profiler</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">matcher</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&quot;^/admin/&quot;</span> <span class="p-Indicator">}</span>

<span class="c1"># combina reglas</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">profiler</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">matcher</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">ip</span><span class="p-Indicator">:</span> <span class="nv">192.168.0.0/24</span><span class="p-Indicator">,</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&quot;^/admin/&quot;</span> <span class="p-Indicator">}</span>

<span class="c1"># usa una instancia emparejadora personalizada definida en el servicio &quot;custom_matcher&quot;</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">profiler</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">matcher</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">service</span><span class="p-Indicator">:</span> <span class="nv">custom_matcher</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- activa el generador de perfiles sólo para peticiones entrantes de la red 192.168.0.0 --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:profiler&gt;</span>
        <span class="nt">&lt;framework:matcher</span> <span class="na">ip=</span><span class="s">&quot;192.168.0.0/24&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:profiler&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- activa el generador de perfiles sólo para las URL /admin --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:profiler&gt;</span>
        <span class="nt">&lt;framework:matcher</span> <span class="na">path=</span><span class="s">&quot;^/admin/&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:profiler&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- combina reglas --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:profiler&gt;</span>
        <span class="nt">&lt;framework:matcher</span> <span class="na">ip=</span><span class="s">&quot;192.168.0.0/24&quot;</span> <span class="na">path=</span><span class="s">&quot;^/admin/&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:profiler&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- usa una instancia emparejadora personalizada definida en el servicio &quot;custom_matcher&quot; --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:profiler&gt;</span>
        <span class="nt">&lt;framework:matcher</span> <span class="na">service=</span><span class="s">&quot;custom_matcher&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:profiler&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// activa el generador de perfiles sólo para peticiones entrantes de la red 192.168.0.0</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;profiler&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;matcher&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;ip&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;192.168.0.0/24&#39;</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>

<span class="c1">// activa el generador de perfiles sólo para las URL /admin</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;profiler&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;matcher&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;path&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;^/admin/&#39;</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>

<span class="c1">// combina reglas</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;profiler&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;matcher&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;ip&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;192.168.0.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;^/admin/&#39;</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>

<span class="c1"># usa una instancia emparejadora personalizada definida en el servicio &quot;custom_matcher&quot;</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;profiler&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;matcher&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;service&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;custom_matcher&#39;</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="aprende-mas-en-el-recetario">
<h2>Aprende más en el recetario<a class="headerlink" href="#aprende-mas-en-el-recetario" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/testing/profiling.html"><em>Cómo utilizar el generador de perfiles en una prueba funcional</em></a></li>
<li><a class="reference internal" href="../cookbook/profiler/data_collector.html"><em>Cómo crear un colector de datos personalizado</em></a></li>
<li><a class="reference internal" href="../cookbook/event_dispatcher/class_extension.html"><em>Cómo extender una clase sin necesidad de utilizar herencia</em></a></li>
<li><a class="reference internal" href="../cookbook/event_dispatcher/method_behavior.html"><em>Cómo personalizar el comportamiento de un método sin utilizar herencia</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <a href="https://github.com/symfony/symfony-standard"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://gitnacho.github.com/tnp/img/comun/bifurcame.png" alt="Bifúrcame en GitHub" /></a>
  
  <div style="width:740px;margin:10px auto;">
    
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="stable_api.html" title="API estable de Symfony2"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="performance.html" title="Rendimiento"
             >anterior</a> |</li>
        <li><a href="../index.html">en Español</a> &raquo;</li>
          <li><a href="index.html" >Libro</a> &raquo;</li> 
      </ul>
    </div>
  </div>


   <div style="width: 740px; margin: 0 auto;">
     <div id="disqus_thread"></div>
     
    <div class="footer">
        &copy; Copyright 2011-2012, Traducido por Nacho Pacheco.
      Actualizado por última vez en Jun 14, 2012.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
   </div>
   <script type="text/javascript">
    var disqus_shortname = 'documentos-mx';
    var disqus_developer = 1;
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script>
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>