
<!DOCTYPE html> 
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Anotaciones &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../../_static/tnp.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.15',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/icotnp.ico"/>
    <link rel="top" title="Manual de Symfony2 en Español" href="../../index.html" />
    <link rel="up" title="JMSSecurityExtraBundle" href="index.html" />
    <link rel="next" title="DoctrineFixturesBundle" href="../DoctrineFixturesBundle/index.html" />
    <link rel="prev" title="Método de seguridad para autorización" href="method_security_authorization.html" /> 
  </head>
  <body>
  <div class="imalogo">
    
  <a href="../../index.html"><img src="http://gitnacho.github.com/tnp/img/sf/logo-big.gif" alt="Edición estándar de Symfony2" />
  
    <a href="../../index.html"><img src="http://gitnacho.github.com/tnp/_static/normaltnp.png" alt="Traducciones de Nacho Pacheco" /></a>
    <div class="social">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="esymfony" data-lang="es">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
    <div id="searchbox">
      <form class="searc " action="../../search.html" method="get">
      <input type="search" name="q" placeholder="Término a buscar" />
      <input type="submit" value="Ir" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
    

    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../DoctrineFixturesBundle/index.html" title="DoctrineFixturesBundle"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="method_security_authorization.html" title="Método de seguridad para autorización"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" >Paquetes de la edición estándar de <em>Symfony</em></a> &raquo;</li>
          <li><a href="index.html" accesskey="U"><tt class="docutils literal"><span class="pre">JMSSecurityExtraBundle</span></tt></a> &raquo;</li> 
      </ul>
    </div>
  </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="anotaciones">
<h1>Anotaciones<a class="headerlink" href="#anotaciones" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="preauthorize">
<h2><tt class="docutils literal"><span class="pre">&#64;PreAuthorize</span></tt><a class="headerlink" href="#preauthorize" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta anotación te permite definir una expresión (ve el párrafo del lenguaje de expresiones) que se ejecutó anteriormente a la invocación de un método:</p>
<div class="highlight-php"><div class="highlight"><pre>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">JMS\SecurityExtraBundle\Annotation\PreAuthorize</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyService</span>
<span class="p">{</span>
    <span class="sd">/** @PreAuthorize(&quot;hasRole(&#39;A&#39;) or (hasRole(&#39;B&#39;) and hasRole(&#39;C&#39;))&quot;) */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">secureMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Si quieres asegurar todas las acciones del controlador con la misma regla, también puedes especificar <tt class="docutils literal"><span class="pre">&#64;PreAuthorize</span></tt> en la misma clase. Aun así ten cuidado, esta regla sólo es aplica a los métodos declarados en la clase.</p>
</div>
</div>
<div class="section" id="secure">
<h2><tt class="docutils literal"><span class="pre">&#64;Secure</span></tt><a class="headerlink" href="#secure" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta anotación te permite definir quién está autorizado a invocar un método:</p>
<div class="highlight-php"><div class="highlight"><pre>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">JMS\SecurityExtraBundle\Annotation\Secure</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyService</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Secure(roles=&quot;ROLE_USER, ROLE_FOO, ROLE_ADMIN&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">secureMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="secureparam">
<h2><tt class="docutils literal"><span class="pre">&#64;SecureParam</span></tt><a class="headerlink" href="#secureparam" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta anotación te permite definir restricciones para los parámetros que se le pasan al método. Esto sólo es útil si los parámetros son objetos del dominio:</p>
<div class="highlight-php"><div class="highlight"><pre>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">JMS\SecurityExtraBundle\Annotation\SecureParam</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyService</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @SecureParam(name=&quot;comment&quot;, permissions=&quot;EDIT, DELETE&quot;)</span>
<span class="sd">     * @SecureParam(name=&quot;post&quot;, permissions=&quot;OWNER&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">secureMethod</span><span class="p">(</span><span class="nv">$comment</span><span class="p">,</span> <span class="nv">$post</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="securereturn">
<h2><tt class="docutils literal"><span class="pre">&#64;SecureReturn</span></tt><a class="headerlink" href="#securereturn" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta anotación te permite definir restricciones para el valor que devuelve el método. Esto también es útil sólo si el valor devuelto es un objeto del dominio:</p>
<div class="highlight-php"><div class="highlight"><pre>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">JMS\SecurityExtraBundle\Annotation\SecureReturn</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyService</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @SecureReturn(permissions=&quot;VIEW&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">secureMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="k">return</span> <span class="nv">$domainObject</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="runas">
<h2><tt class="docutils literal"><span class="pre">&#64;RunAs</span></tt><a class="headerlink" href="#runas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta anotación te permite especificar los roles que se añadirán sólo mientras subsista la invocación del método. Estos roles no serán tomados en consideración antes o después de las decisiones de acceso en la invocación.</p>
<p>Este se suele utilizar para implementar una capa de dos niveles para el servicio, donde tienes servicios públicos y privados, y los servicios privados únicamente son invocados a través de un servicio público específico:</p>
<div class="highlight-php"><div class="highlight"><pre>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">JMS\SecurityExtraBundle\Annotation\Secure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">JMS\SecurityExtraBundle\Annotation\RunAs</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyPrivateService</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Secure(roles=&quot;ROLE_PRIVATE_SERVICE&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">aMethodOnlyToBeInvokedThroughASpecificChannel</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">MyPublicService</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$myPrivateService</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @Secure(roles=&quot;ROLE_USER&quot;)</span>
<span class="sd">     * @RunAs(roles=&quot;ROLE_PRIVATE_SERVICE&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">canBeInvokedFromOtherServices</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">myPrivateService</span><span class="o">-&gt;</span><span class="na">aMethodOnlyToBeInvokedThroughASpecificChannel</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="satisfiesparentsecuritypolicy">
<h2><tt class="docutils literal"><span class="pre">&#64;SatisfiesParentSecurityPolicy</span></tt><a class="headerlink" href="#satisfiesparentsecuritypolicy" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esto lo debes definir en un método que sustituya al método que tiene metadatos de seguridad.
Está ahí para asegurarse de que estás consciente de que la seguridad del método reemplazado no se puede hacer valer más, y que tienes que copiar todas las anotaciones si deseas mantenerlas.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <a href="https://github.com/symfony/symfony-standard"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://gitnacho.github.com/tnp/img/comun/bifurcame.png" alt="Bifúrcame en GitHub" /></a>
  
  <div style="width:740px;margin:10px auto;">
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../DoctrineFixturesBundle/index.html" title="DoctrineFixturesBundle"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="method_security_authorization.html" title="Método de seguridad para autorización"
             >anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" >Paquetes de la edición estándar de <em>Symfony</em></a> &raquo;</li>
          <li><a href="index.html" ><tt class="docutils literal"><span class="pre">JMSSecurityExtraBundle</span></tt></a> &raquo;</li> 
      </ul>
    </div>
  </div>


   <div style="width: 740px; margin: 0 auto;">
     <div id="disqus_thread"></div>
     
    <div class="footer">
        &copy; Copyright 2011-2012, Traducido por Nacho Pacheco.
      Actualizado por última vez en Dec 08, 2012.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
   </div>
   <script type="text/javascript">
    var disqus_shortname = 'documentos-mx';
    var disqus_developer = 1;
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script>
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>