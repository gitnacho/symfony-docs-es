
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Estructura de un paquete y buenas prácticas &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../../_static/tnp.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.15',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/icotnp.ico"/>
    <link rel="top" title="Manual de Symfony2 en Español" href="../../index.html" />
    <link rel="up" title="Paquetes" href="index.html" />
    <link rel="next" title="Cómo utilizar la herencia de paquetes para redefinir partes de un paquete" href="inheritance.html" />
    <link rel="prev" title="Paquetes" href="index.html" /> 
  </head>
  <body>
  <div class="imalogo">
    
  <a href="../../index.html"><img src="http://gitnacho.github.com/tnp/img/sf/logo-big.gif" alt="Edición estándar de Symfony2" />
  
    <a href="http://gitnacho.github.com/tnp/"><img src="http://gitnacho.github.com/tnp/_static/normaltnp.png" alt="Traducciones de Nacho Pacheco" /></a>
    <div class="social">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="esymfony" data-lang="es">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
    <div id="searchbox">
      <form class="searc " action="../../search.html" method="get">
      <input type="search" name="q" placeholder="Término a buscar" />
      <input type="submit" value="Ir" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
    

    
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="inheritance.html" title="Cómo utilizar la herencia de paquetes para redefinir partes de un paquete"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="Paquetes"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" >Recetario</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Paquetes</a> &raquo;</li> 
      </ul>
    </div>
  </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="estructura-de-un-paquete-y-buenas-practicas">
<span id="index-0"></span><h1>Estructura de un paquete y buenas prácticas<a class="headerlink" href="#estructura-de-un-paquete-y-buenas-practicas" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Un paquete es un directorio que tiene una estructura bien definida y puede alojar cualquier cosa, desde clases hasta controladores y recursos web. A pesar de que los paquetes son tan flexibles, se deben seguir algunas recomendaciones si deseas distribuirlos.</p>
<div class="section" id="nombre-de-paquete">
<span id="bundles-naming-conventions"></span><span id="index-1"></span><h2>Nombre de paquete<a class="headerlink" href="#nombre-de-paquete" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un paquete también es un espacio de nombres <em>PHP</em>. El espacio de nombres debe seguir los <a class="reference external" href="http://symfony.com/PSR0">estándares</a> de interoperabilidad técnica de los espacios de nombres y nombres de clases de <em>PHP</em> 5.3: comienza con un segmento de proveedor, seguido por cero o más segmentos de categoría, y termina con el nombre corto del espacio de nombres, el cual debe terminar con el sufijo <tt class="docutils literal"><span class="pre">Bundle</span></tt>.</p>
<p>Un espacio de nombres se convierte en un paquete tan pronto como se agrega una clase <tt class="docutils literal"><span class="pre">bundle</span></tt> al mismo. El nombre de la clase <tt class="docutils literal"><span class="pre">bundle</span></tt> debe seguir estas sencillas reglas:</p>
<ul class="simple">
<li>Solo utiliza caracteres alfanuméricos y guiones bajos;</li>
<li>Usa mayúsculas intercaladas en el nombre;</li>
<li>Usa un nombre corto pero descriptivo (de no más de dos palabras);</li>
<li>Prefija el nombre con la concatenación del proveedor (y, opcionalmente, la categoría del espacio de nombres);</li>
<li>Sufija el nombre con <tt class="docutils literal"><span class="pre">Bundle</span></tt>.</li>
</ul>
<p>Estos son algunos espacios de nombres y nombres de clase <tt class="docutils literal"><span class="pre">bundle</span></tt> válidos:</p>
<table border="1" class="docutils">
<colgroup>
<col width="56%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Espacio de nombres</th>
<th class="head">Nombre de clase <tt class="docutils literal"><span class="pre">Bundle</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Acme\Bundle\BlogBundle</span></tt></td>
<td><tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Acme\Bundle\Social\BlogBundle</span></tt></td>
<td><tt class="docutils literal"><span class="pre">AcmeSocialBlogBundle</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Acme\BlogBundle</span></tt></td>
<td><tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt></td>
</tr>
</tbody>
</table>
<p>Por convención, el método <tt class="docutils literal"><span class="pre">getName()</span></tt> de la clase <tt class="docutils literal"><span class="pre">bundle</span></tt> debe devolver el nombre de la clase.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si compartes tu paquete públicamente, debes utilizar el nombre de la clase <tt class="docutils literal"><span class="pre">bundle</span></tt> como nombre del repositorio (<tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> y no <tt class="docutils literal"><span class="pre">BlogBundle</span></tt> por ejemplo).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Los paquetes del núcleo de <em>Symfony2</em> no prefijan la clase <tt class="docutils literal"><span class="pre">Bundle</span></tt> con <tt class="docutils literal"><span class="pre">Symfony</span></tt> y siempre agregan un subespacio de nombres <tt class="docutils literal"><span class="pre">Bundle</span></tt>; por ejemplo:
<tt class="xref php php-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\FrameworkBundle</span></tt>.</p>
</div>
<p>Cada paquete tiene un alias, el cual es la versión corta en minúsculas del nombre del paquete con guiones bajos (<tt class="docutils literal"><span class="pre">acme_hello</span></tt> para <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>, o <tt class="docutils literal"><span class="pre">acme_social_blog</span></tt>  para  <tt class="docutils literal"><span class="pre">Acme\Social\BlogBundle</span></tt> por ejemplo). Este alias se utiliza para forzar la exclusividad dentro de un paquete (ve abajo algunos ejemplos de uso).</p>
</div>
<div class="section" id="estructura-del-directorio">
<h2>Estructura del directorio<a class="headerlink" href="#estructura-del-directorio" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La estructura básica del directorio del paquete <tt class="docutils literal"><span class="pre">HelloBundle</span></tt> se debe leer de la siguiente manera:</p>
<div class="highlight-text"><div class="highlight"><pre>XXX/...
    HelloBundle/
        HelloBundle.php
        Controller/
        Resources/
            meta/
                LICENSE
            config/
            doc/
                index.rst
            translations/
            views/
            public/
        Tests/
</pre></div>
</div>
<p>Los directorios <tt class="docutils literal"><span class="pre">XXX</span></tt> reflejan la estructura del espacio de nombres del paquete.</p>
<p>Los siguientes archivos son obligatorios:</p>
<ul class="simple">
<li><tt class="file docutils literal"><span class="pre">HelloBundle.php</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">Resources/meta/LICENSE</span></tt>: La licencia completa para el código;</li>
<li><tt class="docutils literal"><span class="pre">Resources/doc/index.rst</span></tt>: El archivo raíz de la documentación del paquete.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Estos convenios garantizan que las herramientas automatizadas pueden trabajar confiablemente en esta estructura predeterminada.</p>
</div>
<p>La profundidad de los subdirectorios se debe reducir al mínimo en la mayoría de las clases y archivos utilizados (2 niveles como máximo). Puedes definir más niveles para archivos no estratégicos, los menos utilizados.</p>
<p>El directorio del paquete es de sólo lectura. Si necesitas escribir archivos temporales, guárdalos en el directorio <tt class="docutils literal"><span class="pre">cache/</span></tt> o <tt class="docutils literal"><span class="pre">log/</span></tt> de la aplicación anfitriona. Las herramientas pueden generar archivos en la estructura de directorios del paquete, pero sólo si los archivos generados van a formar parte del repositorio.</p>
<p>Las siguientes clases y archivos tienen emplazamientos específicos:</p>
<table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Tipo</th>
<th class="head">Directorio</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ordenes</td>
<td><tt class="docutils literal"><span class="pre">Command/</span></tt></td>
</tr>
<tr class="row-odd"><td>Controladores</td>
<td><tt class="docutils literal"><span class="pre">Controller/</span></tt></td>
</tr>
<tr class="row-even"><td>Extensiones contenedoras de servicios</td>
<td><tt class="docutils literal"><span class="pre">DependencyInjection/</span></tt></td>
</tr>
<tr class="row-odd"><td>Escuchas de eventos</td>
<td><tt class="docutils literal"><span class="pre">EventListener/</span></tt></td>
</tr>
<tr class="row-even"><td>Configuración</td>
<td><tt class="docutils literal"><span class="pre">Resources/config/</span></tt></td>
</tr>
<tr class="row-odd"><td>Recursos <em>Web</em></td>
<td><tt class="docutils literal"><span class="pre">Resources/public/</span></tt></td>
</tr>
<tr class="row-even"><td>Archivos de traducción</td>
<td><tt class="docutils literal"><span class="pre">Resources/translations/</span></tt></td>
</tr>
<tr class="row-odd"><td>Plantillas</td>
<td><tt class="docutils literal"><span class="pre">Resources/views/</span></tt></td>
</tr>
<tr class="row-even"><td>Pruebas unitarias y funcionales</td>
<td><tt class="docutils literal"><span class="pre">Tests/</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="clases">
<h2>Clases<a class="headerlink" href="#clases" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La estructura del directorio de un paquete se utiliza como la jerarquía del espacio de nombres. Por ejemplo, un controlador <tt class="docutils literal"><span class="pre">HelloController</span></tt> se almacena en <tt class="docutils literal"><span class="pre">/HelloBundle/Controller/HelloController.php</span></tt> y el nombre de clase completamente cualificado es <tt class="docutils literal"><span class="pre">Bundle\HelloBundle\Controller\HelloController</span></tt>.</p>
<p>Todas las clases y archivos deben seguir los <a class="reference internal" href="../../contributing/code/standards.html"><em>estándares</em></a> de codificación <em>Symfony2</em>.</p>
<p>Algunas clases se deben ver como fachada y deben ser lo más breves posible, al igual que las ordenes, ayudantes, escuchas y controladores.</p>
<p>Las clases que conectan el Evento al Despachador deben llevar el posfijo <tt class="docutils literal"><span class="pre">Listener</span></tt>.</p>
<p>Las clases de excepciones se deben almacenar en un subespacio de nombres <tt class="docutils literal"><span class="pre">Exception</span></tt>.</p>
</div>
<div class="section" id="terceros">
<h2>Terceros<a class="headerlink" href="#terceros" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un paquete no debe integrar bibliotecas <em>PHP</em> de terceros. Se debe confiar en la carga automática estándar de <em>Symfony2</em> en su lugar.</p>
<p>Un paquete no debería integrar bibliotecas de terceros escritas en <em>JavaScript</em>, <em>CSS</em> o cualquier otro lenguaje.</p>
</div>
<div class="section" id="pruebas">
<h2>Pruebas<a class="headerlink" href="#pruebas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un paquete debe venir con un banco de pruebas escritas con <em>PHPUnit</em> , las cuales se deben almacenar en el directorio <tt class="docutils literal"><span class="pre">Test/</span></tt>. Las pruebas deben seguir los siguientes principios:</p>
<ul class="simple">
<li>El banco de pruebas se debe ejecutar con una simple orden <tt class="docutils literal"><span class="pre">phpunit</span></tt> desde una aplicación de ejemplo;</li>
<li>Las pruebas funcionales sólo se deben utilizar para probar la respuesta de salida y alguna información de perfilado si tiene alguno;</li>
<li>La cobertura de código por lo menos debe cubrir el 95% del código base.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un banco de pruebas no debe contener archivos <tt class="file docutils literal"><span class="pre">AllTests.php</span></tt>, sino que se debe basar en la existencia de un archivo <tt class="file docutils literal"><span class="pre">phpunit.xml.dist</span></tt>.</p>
</div>
</div>
<div class="section" id="documentacion">
<h2>Documentación<a class="headerlink" href="#documentacion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Todas las clases y funciones deben venir con <em>PHPDoc</em> completo.</p>
<p>También deberá proporcionar abundante documentación provista en formato <a class="reference internal" href="../../contributing/documentation/format.html"><em>reStructuredText</em></a>, bajo el directorio <tt class="docutils literal"><span class="pre">Resources/doc/</span></tt>; el archivo <tt class="docutils literal"><span class="pre">Resources/doc/index.rst</span></tt> es el único archivo obligatorio y debe ser el punto de entrada para la documentación.</p>
</div>
<div class="section" id="controladores">
<h2>Controladores<a class="headerlink" href="#controladores" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Como práctica recomendada, los controladores en un paquete que está destinado a ser distribuido a otros no debe extender la clase base <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\Controller\Controller`</span></tt>.
Puede implementar la <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\DependencyInjection\ContainerAwareInterface</span></tt> o en su lugar extender la clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\DependencyInjection\ContainerAware</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si echas un vistazo a los métodos de la clase <tt class="xref php php-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\Controller\Controller</span></tt>, podrás ver que sólo son buenos accesos directos para facilitar la curva de aprendizaje.</p>
</div>
</div>
<div class="section" id="enrutado">
<h2>Enrutado<a class="headerlink" href="#enrutado" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Si el paquete proporciona rutas, estas se deben prefijar con el alias del paquete.
Para un <tt class="docutils literal"><span class="pre">AcmeBlogBundle</span></tt> por ejemplo, todas las rutas deben llevar el prefijo <tt class="docutils literal"><span class="pre">acme_blog_</span></tt>.</p>
</div>
<div class="section" id="plantillas">
<h2>Plantillas<a class="headerlink" href="#plantillas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Si un paquete proporciona plantillas, estas deben utilizar <em>Twig</em>. Un paquete no debe proporcionar un diseño principal, salvo si ofrece una aplicación completa.</p>
</div>
<div class="section" id="archivos-de-traduccion">
<h2>Archivos de traducción<a class="headerlink" href="#archivos-de-traduccion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Si un paquete proporciona traducción de mensajes, se deben definir en formato <em>XLIFF</em>; el dominio se debe nombrar después del nombre del paquete (<tt class="docutils literal"><span class="pre">bundle.hello</span></tt>).</p>
<p>Un paquete no debe reemplazar los mensajes de otro paquete existente.</p>
</div>
<div class="section" id="configurando">
<h2>Configurando<a class="headerlink" href="#configurando" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para proporcionar mayor flexibilidad, un paquete puede proporcionar opciones configurables utilizando los mecanismos integrados de <em>Symfony2</em>.</p>
<p>Para ajustes de configuración simples, confía en los <tt class="docutils literal"><span class="pre">parámetros</span></tt> predeterminados de la configuración de <em>Symfony2</em>. Los parámetros de <em>Symfony2</em> simplemente son pares clave/valor; un valor es cualquier valor <em>PHP</em> válido. El nombre de cada parámetro debe comenzar con el alias del paquete, aunque esto es sólo una sugerencia de buenas prácticas. El resto del nombre del parámetro utiliza un punto (<tt class="docutils literal"><span class="pre">.</span></tt>) para separar las diferentes partes (por ejemplo, <tt class="docutils literal"><span class="pre">acme_hello.email.from</span></tt>).</p>
<p>El usuario final puede proporcionar valores en cualquier archivo de configuración:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">parameters</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">acme_hello.email.from</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">fabien@example.com</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;parameters&gt;</span>
    <span class="nt">&lt;parameter</span> <span class="na">key=</span><span class="s">&quot;acme_hello.email.from&quot;</span><span class="nt">&gt;</span>fabien@example.com<span class="nt">&lt;/parameter&gt;</span>
<span class="nt">&lt;/parameters&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;acme_hello.email.from&#39;</span><span class="p">,</span> <span class="s1">&#39;fabien@example.com&#39;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="p-Indicator">[</span><span class="nv">parameters</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">acme_hello.email.from = fabien@example.com</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Recupera los parámetros de configuración en tu código desde el contenedor:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$container</span><span class="o">-&gt;</span><span class="na">getParameter</span><span class="p">(</span><span class="s1">&#39;acme_hello.email.from&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Incluso si este mecanismo es bastante simple, te animamos a usar la configuración semántica descrita en el recetario.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si vas a definir servicios, estos también se deben prefijar con el alias del paquete.</p>
</div>
</div>
<div class="section" id="aprende-mas-en-el-recetario">
<h2>Aprende más en el recetario<a class="headerlink" href="#aprende-mas-en-el-recetario" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="extension.html"><em>Cómo exponer la configuración semántica de un paquete</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <a href="https://github.com/symfony/symfony-standard"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://gitnacho.github.com/tnp/img/comun/bifurcame.png" alt="Bifúrcame en GitHub" /></a>
  
  <div style="width:740px;margin:10px auto;">
    
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="inheritance.html" title="Cómo utilizar la herencia de paquetes para redefinir partes de un paquete"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="Paquetes"
             >anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" >Recetario</a> &raquo;</li>
          <li><a href="index.html" >Paquetes</a> &raquo;</li> 
      </ul>
    </div>
  </div>


   <div style="width: 740px; margin: 0 auto;">
     <div id="disqus_thread"></div>
     
    <div class="footer">
        &copy; Copyright 2011-2012, Traducido por Nacho Pacheco.
      Actualizado por última vez en Jun 14, 2012.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
   </div>
   <script type="text/javascript">
    var disqus_shortname = 'documentos-mx';
    var disqus_developer = 1;
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script>
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>