
<!DOCTYPE html> 
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>RoutingExtraBundle &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../../_static/tnp.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.15',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/icotnp.ico"/>
    <link rel="top" title="Manual de Symfony2 en Español" href="../../index.html" />
    <link rel="up" title="Documentación del CMF de Symfony" href="../index.html" />
    <link rel="next" title="RoutingAutoBundle" href="routing_auto.html" />
    <link rel="prev" title="MenuBundle" href="menu.html" /> 
  </head>
  <body>
  <div class="imalogo">
    
  <a href="../../index.html"><img src="http://gitnacho.github.com/tnp/img/sf/logo-big.gif" alt="Edición estándar de Symfony2" />
  
    <a href="../../index.html"><img src="http://gitnacho.github.com/tnp/_static/normaltnp.png" alt="Traducciones de Nacho Pacheco" /></a>
    <div class="social">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="esymfony" data-lang="es">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
    <div id="searchbox">
      <form class="searc " action="../../search.html" method="get">
      <input type="search" name="q" placeholder="Término a buscar" />
      <input type="submit" value="Ir" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
    

    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="routing_auto.html" title="RoutingAutoBundle"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="menu.html" title="MenuBundle"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Documentación del <tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">CMF</span></tt> de <em>Symfony</em></a> &raquo;</li> 
      </ul>
    </div>
  </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="routingextrabundle">
<h1><tt class="docutils literal"><span class="pre">RoutingExtraBundle</span></tt><a class="headerlink" href="#routingextrabundle" title="Enlazar permanentemente con este título">¶</a></h1>
<p>El <a class="reference external" href="https://github.com/symfony-cmf/RoutingExtraBundle#readm]e">RoutingExtraBundle</a> integra el enrutado dinámico a <em>Symfony</em> utilizando <a class="reference internal" href="../components/routing.html"><em>Enrutando</em></a>.</p>
<p>La <tt class="docutils literal"><span class="pre">ChainRouter</span></tt> pretende reemplazar el enrutador predefinido de <em>Symfony</em>. Todo lo que hace es recoger una lista priorizada de rutas e intenta emparejar peticiones y generar las <em>URL</em> con todas ellas. Naturalmente, una de las rutas en esa cadena puede ser la ruta predefinida para que todavía la puedas utilizar de la manera estándar en algunas de tus rutas.</p>
<p>Además, este paquete entrega útiles implementaciones de enrutado. Actualmente, existe el <tt class="docutils literal"><span class="pre">DynamicRouter</span></tt> que enruta basándose en una lógica de cargador personalizada para los objetos <tt class="docutils literal"><span class="pre">Ruta</span></tt> de <em>Symfony2</em>. Puedes implementar el proveedor usando una base de datos, por ejemplo con el <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a> de <em>Doctrine</em> o el <em>ORM</em> de <em>Doctrine</em>. Este paquete proporciona una implementación predefinida para el <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a> de <em>Doctrine</em>.</p>
<p>El servicio <tt class="docutils literal"><span class="pre">DynamicRouter</span></tt> sólo está disponible cuándo se habilita explícitamente en la configuración de la aplicación.</p>
<p>Finalmente estos paquetes proporcionan documentos de ruta para el <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a> de <em>Doctrine</em> y un controlador para redirigir rutas.</p>
<span class="target" id="index-0"></span><div class="section" id="dependencias">
<span id="index-1"></span><h2>Dependencias<a class="headerlink" href="#dependencias" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/symfony-cmf/Routing#readme">Routing del CMF de Symfony</a></li>
</ul>
</div>
<div class="section" id="chainrouter">
<h2><tt class="docutils literal"><span class="pre">ChainRouter</span></tt><a class="headerlink" href="#chainrouter" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La <tt class="docutils literal"><span class="pre">ChainRouter</span></tt> puede reemplazar el sistema de enrutado predefinido de <em>Symfony</em> con una implementación habilitada en cadena. Esta no enruta nada por sí misma, sino que únicamente recorre todos los enrutadores encadenados. Para manejar las rutas estándar configuradas en <em>Symfony</em>, el enrutador predefinido de <em>Symfony</em> se puede poner en la cadena.</p>
</div>
<div class="section" id="configurando">
<h2>Configurando<a class="headerlink" href="#configurando" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En tu archivo <tt class="file docutils literal"><span class="pre">app/config/config.yml</span></tt>, puedes especificar cual servicio de enrutado quieres usar. Si no especificas el <tt class="docutils literal"><span class="pre">routers_by_id</span></tt> asigna todos, de manera predefinida el enrutador encadenado simplemente cargará el enrutador construido en <em>Symfony</em>. Cuándo especificas la lista de <tt class="docutils literal"><span class="pre">routers_by_id</span></tt>,  necesitas tener una entrada para <tt class="docutils literal"><span class="pre">router.default</span></tt> si quieres el enrutador de <em>Symfony2</em> (aquel que lee las rutas desde <tt class="file docutils literal"><span class="pre">app/config/routing.yml</span></tt>).</p>
<p>El formato es <tt class="docutils literal"><span class="pre">service_name:</span> <span class="pre">priority</span></tt> &#8212; el número de prioridad más alto anterior es preguntado a este servicio enrutador para emparejar una ruta o para generar una <em>url</em>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">symfony_cmf_routing_extra</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">chain</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">routers_by_id</span><span class="p-Indicator">:</span>
            <span class="c1"># activa el DynamicRouter con alta prioridad para redefinir</span>
            <span class="c1"># el enrutador configurado con contenido</span>
            <span class="l-Scalar-Plain">symfony_cmf_routing_extra.dynamic_router</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">200</span>
            <span class="c1"># activa el enrutador predefinido de symfony con</span>
            <span class="c1"># baja prioridad</span>
            <span class="l-Scalar-Plain">router.default</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">100</span>
        <span class="c1"># cuando la cadena de enrutadores debe sustituir al enrutador predefinido. por omisión es true</span>
        <span class="c1"># si lo pones en false, el enrutador sólo estará disponible como servicio</span>
        <span class="c1"># symfony_cmf_routing_extra.router y debes hacer algo para lanzarlo</span>
        <span class="c1"># replace_symfony_router: true</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="cargando-enrutadores-con-etiquetado">
<h3>Cargando enrutadores con etiquetado<a class="headerlink" href="#cargando-enrutadores-con-etiquetado" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Tus enrutadores se pueden registrar automáticamente, justo añadiéndolos como servicios etiquetados con <cite>router</cite> y una <tt class="docutils literal"><span class="pre">prioridad</span></tt> opcional.
Mientras más alta prioridad, más temprano será consultado tu enrutador para emparejar la ruta. Si no especificas la prioridad, tu enrutador vendrá al último.
Si hay varios enrutadores con la misma prioridad, el orden entre ellos es indeterminado.
El servicio etiquetado tendrá esta apariencia:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><pre>services:
    my_namespace.my_router:
        class: %my_namespace.my_router_class%
        tags:
                - { name: router, priority: 300 }</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;my_namespace.my_router&quot;</span> <span class="na">class=</span><span class="s">&quot;%my_namespace.my_router_class%&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tag</span> <span class="na">name=</span><span class="s">&quot;router&quot;</span> <span class="na">priority=</span><span class="s">&quot;300&quot;</span> <span class="nt">/&gt;</span>
    ..
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Ve también la <a class="reference external" href="http://gitnacho.github.com/symfony-docs-es/reference/dic_tags.html">documentación oficial de Symfony2 para las etiquetas de inyección de dependencias</a></p>
</div>
</div>
<div class="section" id="enrutador-dinamico">
<h2>Enrutador dinámico<a class="headerlink" href="#enrutador-dinamico" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta implementación de un <tt class="docutils literal"><span class="pre">enrutador</span></tt> utiliza <tt class="docutils literal"><span class="pre">NestedMatcher</span></tt> el cuál carga rutas de una <tt class="docutils literal"><span class="pre">RouteProviderInterface</span></tt>. La interfaz del proveedor se puede implementar fácilmente con <em>Doctrine</em>.</p>
<p>El <tt class="docutils literal"><span class="pre">enrutador</span></tt> trabaja con clases extendidas de <tt class="docutils literal"><span class="pre">UrlMatcher</span></tt> y <tt class="docutils literal"><span class="pre">UrlGenerator</span></tt> que añaden la carga de rutas desde la base de datos y el concepto de contenido referido.</p>
<p>El servicio <tt class="docutils literal"><span class="pre">NestedMatcher</span></tt> está configurado con un proveedor de rutas. Ve cómo cambiar el <tt class="docutils literal"><span class="pre">route_repository_service</span></tt> en la sección de configuración y la siguiente sección para más detalles de la implementación predeterminada basada en <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a>.</p>
<p>Quzás quieras configurar potenciadores de enrutado para decidir cual controlador usar para manejar la petición, para evitar la codificación directa de los nombres de controlador para enrutar tus documentos.</p>
<p>La configuración mínima requerida para cargar el enrutador dinámico como un servicio <tt class="docutils literal"><span class="pre">symfony_cmf_routing_extra.dynamic_router</span></tt> es tenerlo como <tt class="docutils literal"><span class="pre">enabled:</span> <span class="pre">true</span></tt> en tu archivo <tt class="file docutils literal"><span class="pre">config.yml</span></tt> (El enrutador se activa automáticamente apenas añadas cualquier otra configuración a la entrada <tt class="docutils literal"><span class="pre">dynamic</span></tt>). Sin habilitarlo, el servicio enrutador dinámico no será cargado en absoluto, dejándote utilizar la <tt class="docutils literal"><span class="pre">ChainRouter</span></tt> con tus propios enrutadores:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">symfony_cmf_routing_extra</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">dynamic</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="integrando-phpcr-odm">
<h3>Integrando <em>PHPCR-ODM</em><a class="headerlink" href="#integrando-phpcr-odm" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este paquete viene con una implementación de enrutador con repositorio para <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a>.
<em>PHPCR</em> es apropiado para la naturaleza del árbol de datos. Si usas <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a> con un documento de ruta como el proporcionado, justo puedes dejar el servicio repositorio como el predefinido.</p>
<p>El repositorio predefinido carga la ruta desde la ruta en la petición y todas las rutas padre para permitir que algunos de los segmentos de la ruta sigan siendo parámetros. Si necesitas una diferente manera de cargar rutas o, por ejemplo, nunca usar parámetros, puedes escribir tu propia implementación del repositorio para optimizarla (ve en el archivo <tt class="file docutils literal"><span class="pre">cmf_routing.xml</span></tt> cómo configurar el servicio).</p>
</div>
<div class="section" id="proceso-de-concordancia">
<span id="index-2"></span><h3>Proceso de concordancia<a class="headerlink" href="#proceso-de-concordancia" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La mayoría del proceso de concordancia está descrito en la documentación del <a class="reference external" href="https://github.com/symfony-cmf/Routing">componente enrutador del CMF</a>.
La única diferencia es que el paquete colocará el <tt class="docutils literal"><span class="pre">contentDocument</span></tt> en los atributos de la petición en vez de en la ruta predefinida.</p>
<p>Tus controladores pueden (y tienen que) declarar el parámetro <tt class="docutils literal"><span class="pre">$contentDocument</span></tt> en tus métodos <tt class="docutils literal"><span class="pre">Action</span></tt> si se supone que trabajen con el contenido referido por las rutas.
Ve <tt class="docutils literal"><span class="pre">Symfony\Cmf\Bundle\ContentBundle\Controller\ContentController</span></tt> para un ejemplo.</p>
</div>
<div class="section" id="bundle-routing-route-enhancer">
<span id="id2"></span><h3>Configurando<a class="headerlink" href="#bundle-routing-route-enhancer" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para configurar qué controlador se utiliza para cuál contenido, puedes especificar potenciadores de ruta. La presencia de cualquiera de los potenciadores en la configuración hace que el contenedor de dependencias inyecte al <tt class="docutils literal"><span class="pre">DynamicRouter</span></tt> el potenciador respectivo.</p>
<p>Los posibles potenciadores son (en orden de precedencia):</p>
<ul>
<li><p class="first">(Controlador explícito): Si existe un <tt class="docutils literal"><span class="pre">_controller</span></tt> en <tt class="docutils literal"><span class="pre">getRouteDefaults()</span></tt>, ningún potenciador lo sustituye.</p>
</li>
<li><p class="first">Plantilla explícita: Requiere que el documento de ruta regrese un parámetro <tt class="docutils literal"><span class="pre">'_template'</span></tt> en <tt class="docutils literal"><span class="pre">getRouteDefaults</span></tt>. El controlador genérico configurado está puesto por el potenciador.</p>
</li>
<li><p class="first">Controlador por alias: Requiere que el documento de ruta regrese un valor <tt class="docutils literal"><span class="pre">'type'</span></tt> en <tt class="docutils literal"><span class="pre">getRouteDefaults()</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>Controlador por clase: Requiere que el documento de ruta regrese un objeto para <tt class="docutils literal"><span class="pre">getRouteContent()</span></tt>. The content document is checked for being <tt class="docutils literal"><span class="pre">instanceof</span></tt> the</dt>
<dd><p class="first last">class names in the map and if matched that controller is used.
Se utiliza <tt class="docutils literal"><span class="pre">instanceof</span></tt> en vez de compararlo directamente para trabajar con clases delegadas y extender otras clases.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Plantilla por clase: Requiere que el documento de ruta regrese un objeto para <tt class="docutils literal"><span class="pre">getRouteContent()</span></tt>. The content document is checked for being <tt class="docutils literal"><span class="pre">instanceof</span></tt> the</dt>
<dd><p class="first last">class names in the map and if matched that template will be set as
&#8216;_template&#8217; in the $defaults and the generic controller used as controller.</p>
</dd>
</dl>
</li>
</ul>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">symfony_cmf_routing_extra</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">dynamic</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">generic_controller</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">symfony_cmf_content.controller:indexAction</span>
        <span class="l-Scalar-Plain">controllers_by_type</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">editablestatic</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">sandbox_main.controller:indexAction</span>
        <span class="l-Scalar-Plain">controllers_by_class</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">Symfony\Cmf\Bundle\ContentBundle\Document\StaticContent</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">symfony_cmf_content.controller:indexAction</span>
        <span class="l-Scalar-Plain">templates_by_class</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">Symfony\Cmf\Bundle\ContentBundle\Document\StaticContent</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">SymfonyCmfContentBundle:StaticContent:index.html.twig</span>

        <span class="c1"># el proveedor de ruta es responsable de cargar rutas.</span>
        <span class="l-Scalar-Plain">manager_registry</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">doctrine_phpcr</span>
        <span class="l-Scalar-Plain">manager_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">default</span>

        <span class="c1"># Si usas la ruta predefinida del servicio repositorio de</span>
        <span class="c1"># Doctrine, puedes usar esto para personalizar la ruta raíz</span>
        <span class="c1"># para el RouteProvider de PHPCR-ODM. Esta ruta base</span>
        <span class="c1"># es inyectada por el escucha\IdPrefix - pero sólo para</span>
        <span class="c1"># las rutas que coincidan con el prefijo, para permitir</span>
        <span class="c1"># más de una ruta fuente.</span>
        <span class="l-Scalar-Plain">routing_repositoryroot</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/cms/routes</span>

        <span class="c1"># Si deseas reemplazar el proveedor de ruta predefinido</span>
        <span class="c1"># o tu repositorio de contenido puedes especificar sus</span>
        <span class="c1"># identificadores de servicio aquí.</span>
        <span class="l-Scalar-Plain">route_provider_service_id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my_bundle.provider.endpoint</span>
        <span class="l-Scalar-Plain">content_repository_service_id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my_bundle.repository.endpoint</span>

        <span class="c1"># Un proveedor orm podría necesitar diferente configuración.</span>
        <span class="c1"># Ve un ejemplo en cmf_routing.xml si necesitas definir</span>
        <span class="c1"># tu propio servicio</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Para ver algunos ejemplos, por favor ve en el <a class="reference external" href="https://github.com/symfony-cmf/cmf-sandbox">recinto de seguridad del CMF</a>, específicamente la carga de accesorios de enrutado.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">You can also define your own RouteEnhancer classes for specific use cases.
See <a class="reference internal" href="#bundle-routing-customize"><em>Personalizando</em></a>.</p>
</div>
</div>
</div>
<div class="section" id="usando-el-documento-de-ruta-phpcr-odm">
<span id="bundle-routing-document"></span><h2>Usando el documento de ruta <em>PHPCR-ODM</em><a class="headerlink" href="#usando-el-documento-de-ruta-phpcr-odm" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Todas las clases de ruta deben extender la clase <tt class="docutils literal"><span class="pre">Route</span></tt> del núcleo de <em>Symfony</em>. Los documentos tampoco se pueden crear por código (por ejemplo un guión de accesorios) o con una interfaz <em>web</em> como la proporcionada para la administración <em>PHPCR-ODM</em> de Sonata (ve abajo).</p>
<p><em>PHPCR-ODM</em> asocia todas las características de la ruta del núcleo al almacenamiento, así que  puedes utilizar normalmente los métodos <tt class="docutils literal"><span class="pre">setDefault</span></tt>, <tt class="docutils literal"><span class="pre">setRequirement</span></tt>, <tt class="docutils literal"><span class="pre">setOption</span></tt> y <tt class="docutils literal"><span class="pre">setHostnamePattern</span></tt>.
Además cuándo creas una ruta, puedes definir si <tt class="docutils literal"><span class="pre">.{_format}</span></tt> se debería anexar al patrón y configurar con requisitos el <tt class="docutils literal"><span class="pre">_format</span></tt> requerido.
La otra opción del constructor te permite controlar si la ruta debería anexar una barra inclinada final porque esto no se puede expresar con un nombre <em>PHPCR</em>. El predefinido es que no tenga ninguna barra inclinada final.</p>
<p>Todas las  rutas están localizadas bajo una ruta configurada como la raíz, por ejemplo <tt class="docutils literal"><span class="pre">'/cms/rutas'</span></tt>.
Puedes crear una nueva ruta en código <em>PHP</em> de la siguiente manera:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Cmf\Bundle\RoutingExtraBundle\Document\Route</span><span class="p">;</span>
<span class="nv">$route</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">;</span>
<span class="nv">$route</span><span class="o">-&gt;</span><span class="na">setParent</span><span class="p">(</span><span class="nv">$dm</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="s1">&#39;/routes&#39;</span><span class="p">));</span>
<span class="nv">$route</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;projects&#39;</span><span class="p">);</span>
<span class="c1">// establece el controlador explícitamente (ambas sintaxis trabajan</span>
<span class="c1">// servicio y Paquete:Nombre:acción)</span>
<span class="nv">$route</span><span class="o">-&gt;</span><span class="na">setDefault</span><span class="p">(</span><span class="s1">&#39;_controller&#39;</span><span class="p">,</span> <span class="s1">&#39;sandbox_main.controller:specialAction&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Sin embargo, el ejemplo anterior probablemente se debería haber hecho como una ruta configurada en un archivo <tt class="docutils literal"><span class="pre">xml/yml</span></tt> de <em>Symfony</em>, a no ser que se suponga que el usuario final cambie la <em>URL</em> o el controlador.</p>
<p>Para enlazar un contenido a esta ruta, sencillamente pon lo siguiente en el documento.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$content</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Content</span><span class="p">(</span><span class="s1">&#39;my content&#39;</span><span class="p">);</span> <span class="c1">// el contenido se debe asociar a una clase</span>
<span class="nv">$route</span><span class="o">-&gt;</span><span class="na">setRouteContent</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
</pre></div>
</div>
<p>Esto pondrá el documento en los parámetros de la petición y si tu controlador especifica un parámetro llamado <tt class="docutils literal"><span class="pre">$contentDocument</span></tt>, le será pasado este documento.</p>
<p>También puedes utilizar patrones variables para la <em>URL</em> y definir requisitos y predeterminados.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// No olvides la barra inclinada inicial si quieres /proyectos/{id} y no /proyectos{id}</span>
<span class="nv">$route</span><span class="o">-&gt;</span><span class="na">setVariablePattern</span><span class="p">(</span><span class="s1">&#39;/{id}&#39;</span><span class="p">);</span>
<span class="nv">$route</span><span class="o">-&gt;</span><span class="na">setRequirement</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;\d+&#39;</span><span class="p">);</span>
<span class="nv">$route</span><span class="o">-&gt;</span><span class="na">setDefault</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>Esto te dará una ruta que empareja con la <em>URL</em> <tt class="docutils literal"><span class="pre">/proyectos/&lt;número&gt;</span></tt> pero también con <tt class="docutils literal"><span class="pre">/proyectos</span></tt> ya que es el predefinido para el parámetro <tt class="docutils literal"><span class="pre">id</span></tt>. Esta emparejará con <tt class="docutils literal"><span class="pre">/proyectos/7</span></tt> así como con <tt class="docutils literal"><span class="pre">/proyectos</span></tt> pero no con <tt class="docutils literal"><span class="pre">/proyectos/x-4</span></tt>.
El documento todavía será almacenado en <tt class="docutils literal"><span class="pre">/rutas/proyectos</span></tt>. Esto trabajará porque, como se mencionó anteriormente, el proveedor de ruta buscará documentos de ruta en todas las rutas posibles y elegirá la primera que coincida. En este ejemplo, si hay un documento de ruta en <tt class="docutils literal"><span class="pre">/rutas/proyectos/7</span></tt> que coincida (sin más parámetros) será seleccionado. De lo contrario comprobará si <tt class="docutils literal"><span class="pre">/rutas/proyectos</span></tt> tiene un patrón que coincida. Si no, el documento superior en <tt class="docutils literal"><span class="pre">/rutas</span></tt> será comprobado.</p>
<p>Naturalmente también puedes tener varios parámetros, como es normal en las rutas de <em>Symfony</em>. La semántica y reglas para patrones, predefinidos y requisitos son exactamente iguales que en las rutas del núcleo.</p>
<p>Tu controlador puede esperar el parámetro <tt class="docutils literal"><span class="pre">$id</span></tt> así como el <tt class="docutils literal"><span class="pre">$contentDocument</span></tt> tal como se
puso un contenido en la ruta. El contenido se podría usar para definir una sección de introducción que sea igual en cada proyecto u otro dato compartido. Si no necesitas contenido, puedes simplemente no ponerlo en el documento.</p>
</div>
<div class="section" id="configurando-la-administracion-de-sonata">
<h2>Configurando la administración de <tt class="docutils literal"><span class="pre">Sonata</span></tt><a class="headerlink" href="#configurando-la-administracion-de-sonata" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Si añades <tt class="docutils literal"><span class="pre">sonata-project/doctrine-phpcr-admin-bundle</span></tt> en la sección <tt class="docutils literal"><span class="pre">require</span></tt> de tu archivo <tt class="file docutils literal"><span class="pre">composer.json</span></tt> y el <tt class="docutils literal"><span class="pre">SonataDoctrinePhpcrAdminBundle</span></tt> es cargado en el núcleo de la aplicación, los documentos de ruta son expuestos en el <tt class="docutils literal"><span class="pre">SonataDoctrinePhpcrAdminBundle</span></tt>.
Para instrucciones sobre cómo configurar este paquete ve <a class="reference internal" href="doctrine_phpcr_admin.html"><em>SonataDoctrinePhpcrAdminBundle</em></a>.</p>
<p>De manera predefinida, <tt class="docutils literal"><span class="pre">use_sonata_admin</span></tt> se configura automáticamente basándose en si <tt class="docutils literal"><span class="pre">SonataDoctrinePhpcrAdminBundle</span></tt> está disponible, pero lo puedes deshabilitar explícitamente no poniéndolo incluso si <tt class="docutils literal"><span class="pre">sonata</span></tt> está habilitado, o lo puedes habilitar explícitamente para obtener un error si <tt class="docutils literal"><span class="pre">sonata</span></tt> queda inutilizable.</p>
<p>Si quieres utilizar el <tt class="docutils literal"><span class="pre">admin</span></tt>, debes configurar la opción <tt class="docutils literal"><span class="pre">content_basepath</span></tt> para que apunte a la raíz de tus documentos de contenido.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">symfony_cmf_routing_extra</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">use_sonata_admin</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">auto</span> <span class="c1"># usa true/false para forzar el uso / no uso de</span>
                           <span class="c1"># la administración de sonata</span>
    <span class="l-Scalar-Plain">content_basepath</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span> <span class="c1"># usado con la administración de sonata para</span>
                        <span class="c1"># manejar el contenido, por omisión a</span>
                        <span class="c1"># symfony_cmf_core.content_basepath</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="el-tipo-form">
<h2>El tipo <tt class="docutils literal"><span class="pre">form</span></tt><a class="headerlink" href="#el-tipo-form" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El paquete define un tipo <tt class="docutils literal"><span class="pre">form</span></tt> que puedes utilizar para la clásica casilla de verificación «aceptar términos» donde  colocas las <em>url</em> en la etiqueta. Simplemente especifica <tt class="docutils literal"><span class="pre">symfony_cmf_routing_extra_terms_form_type</span></tt> como el nombre del tipo <tt class="docutils literal"><span class="pre">form</span></tt> y especifica una etiqueta y un arreglo con <tt class="docutils literal"><span class="pre">content_ids</span></tt> en las opciones</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;terms&#39;</span><span class="p">,</span>
           <span class="s1">&#39;symfony_cmf_routing_extra_terms_form_type&#39;</span><span class="p">,</span>
           <span class="k">array</span><span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;I have seen the &lt;a href=&quot;%team%&quot;&gt;Team&lt;/a&gt; and &lt;a href=&quot;%more%&quot;&gt;More&lt;/a&gt; pages ...&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;content_ids&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;%team%&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/cms/content/static/team&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;%more%&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/cms/content/static/more&#39;</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>El tipo <tt class="docutils literal"><span class="pre">form</span></tt> automáticamente genera las rutas para el contenido especificado y pasa las rutas al ayudante <tt class="docutils literal"><span class="pre">trans</span></tt> de <em>Twig</em> para sustituirlas en la etiqueta.</p>
</div>
<div class="section" id="notas-adicionales">
<h2>Notas adicionales<a class="headerlink" href="#notas-adicionales" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ve la documentación del <a class="reference external" href="https://github.com/symfony-cmf/Routing">componente enrutador del CMF</a> para información sobre la <tt class="docutils literal"><span class="pre">RouteObjectInterface</span></tt>, redirecciones y regiones.</p>
<p>Notas:</p>
<ul class="simple">
<li>RouteObjectInterface: Los documentos proporcionados implementan esta interfaz para asociar contenido a rutas y (opcionalmente) proporcionan un nombre de ruta personalizado en vez del nombre de ruta compatible con el núcleo de <em>Symfony</em>.</li>
<li>Redirecciones: This bundle provides a controller to handle redirections.</li>
</ul>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">symfony_cmf_routing_extra</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">controllers_by_class</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Symfony\Cmf\Component\Routing\RedirectRouteInterface</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">symfony_cmf_routing_extra.redirect_controller:redirectAction</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="personalizando">
<span id="bundle-routing-customize"></span><h2>Personalizando<a class="headerlink" href="#personalizando" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Puedes añadir más implementaciones de la <tt class="docutils literal"><span class="pre">RouteEnhancerInterface</span></tt> si tienes un caso no manejado por el proporcionado. Sencillamente define servicios para tus potenciadores y eiquétalos con <tt class="docutils literal"><span class="pre">dynamic_router_route_enhancer</span></tt> para añadirlos al enrutado.</p>
<p>Si usas un <em>ODM/ORM</em> diferente a <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a>, probablemente necesites especificar la clase para la entidad ruta (en <a class="reference external" href="https://github.com/doctrine/phpcr-odm">PHPCR-ODM</a>, la clase es detectada automáticamente). Para necesidades más específicas, dale una mirada al <tt class="docutils literal"><span class="pre">DynamicRouter</span></tt> y ve si lo quieres extender. También puedes escribir tus propios enrutadores para engancharlos a la cadena.</p>
</div>
<div class="section" id="aprende-mas-en-el-recetario">
<h2>Aprende más en el recetario<a class="headerlink" href="#aprende-mas-en-el-recetario" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/using-a-custom-route-repository.html"><em>Usando un repositorio de rutas personalizado con un enrutador dinámico</em></a></li>
</ul>
</div>
<div class="section" id="id3">
<h2>Notas adicionales<a class="headerlink" href="#id3" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para más información sobre el componente <tt class="docutils literal"><span class="pre">Routing</span></tt> del <tt class="docutils literal"><span class="pre">CMF</span></tt> de <em>Symfony</em>, por favor, consulta:</p>
<ul class="simple">
<li><a class="reference internal" href="../getting-started/routing.html"><em>Enrutando</em></a> para una guía introductoria al paquete <tt class="docutils literal"><span class="pre">Routing</span></tt></li>
<li><a class="reference internal" href="../components/routing.html"><em>Enrutando</em></a> para la mayoría de la funcionalidad implementada actualmente</li>
<li>La página del componente <a class="reference external" href="http://gitnacho.github.com/symfony-docs-es/components/routing/introduction.html">Routing</a> de <em>Symfony2</em>.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <a href="https://github.com/symfony/symfony-standard"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://gitnacho.github.com/tnp/img/comun/bifurcame.png" alt="Bifúrcame en GitHub" /></a>
  
  <div style="width:740px;margin:10px auto;">
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="routing_auto.html" title="RoutingAutoBundle"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="menu.html" title="MenuBundle"
             >anterior</a> |</li>
        <li><a href="../../index.html">en Español</a> &raquo;</li>
          <li><a href="../index.html" >Documentación del <tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">CMF</span></tt> de <em>Symfony</em></a> &raquo;</li> 
      </ul>
    </div>
  </div>


   <div style="width: 740px; margin: 0 auto;">
     <div id="disqus_thread"></div>
     
    <div class="footer">
        &copy; Copyright 2011-2013, Traducido por Nacho Pacheco.
      Actualizado por última vez en Apr 22, 2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
   </div>
   <script type="text/javascript">
    var disqus_shortname = 'documentos-mx';
    var disqus_developer = 1;
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script>
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>